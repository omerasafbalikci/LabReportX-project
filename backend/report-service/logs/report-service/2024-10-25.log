2024-10-25 12:37:20.699 [main] TRACE ReportController - Entering getPrescription method in ReportController class
2024-10-25 12:37:20.715 [main] INFO  ReportController - Fetching prescription for report ID: 1 by user: technician1
2024-10-25 12:37:20.762 [main] TRACE ReportController - Exiting getPrescription method in ReportController class
2024-10-25 12:37:20.824 [main] TRACE ReportController - Entering addReport method in ReportController class
2024-10-25 12:37:20.840 [main] INFO  ReportController - Adding the report by the user: technician1
2024-10-25 12:37:20.840 [main] TRACE ReportController - Exiting addReport method in ReportController class
2024-10-25 12:37:20.856 [main] TRACE ReportController - Entering restoreReport method in ReportController class
2024-10-25 12:37:20.856 [main] INFO  ReportController - Restoring the report with ID: 1 by the user: technician1
2024-10-25 12:37:20.872 [main] TRACE ReportController - Exiting restoreReport method in ReportController class
2024-10-25 12:37:20.872 [main] TRACE ReportController - Entering getReportById method in ReportController class
2024-10-25 12:37:20.872 [main] INFO  ReportController - Retrieving report with ID: 1
2024-10-25 12:37:20.872 [main] TRACE ReportController - Exiting getReportById method in ReportController class
2024-10-25 12:37:20.887 [main] TRACE ReportController - Entering getAllReportsFilteredAndSorted method in ReportController class
2024-10-25 12:37:20.887 [main] INFO  ReportController - Retrieving reports filtered and sorted: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null, deleted=null
2024-10-25 12:37:20.887 [main] TRACE ReportController - Exiting getAllReportsFilteredAndSorted method in ReportController class
2024-10-25 12:37:20.887 [main] TRACE ReportController - Entering updateReport method in ReportController class
2024-10-25 12:37:20.887 [main] INFO  ReportController - Updating the report by the user: technician1
2024-10-25 12:37:20.887 [main] TRACE ReportController - Exiting updateReport method in ReportController class
2024-10-25 12:37:20.903 [main] TRACE ReportController - Entering sendPrescription method in ReportController class
2024-10-25 12:37:20.903 [main] INFO  ReportController - Sending prescription for user: technician1
2024-10-25 12:37:20.903 [main] TRACE ReportController - Exiting sendPrescription method in ReportController class
2024-10-25 12:37:20.903 [main] TRACE ReportController - Entering getAllReportsByTechnician method in ReportController class
2024-10-25 12:37:20.903 [main] INFO  ReportController - Retrieving reports for technician: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, username=technician1, deleted=null
2024-10-25 12:37:20.903 [main] TRACE ReportController - Exiting getAllReportsByTechnician method in ReportController class
2024-10-25 12:37:20.919 [main] TRACE ReportController - Entering deletePhoto method in ReportController class
2024-10-25 12:37:20.919 [main] INFO  ReportController - Deleting photo for report ID: 1 by user: technician1
2024-10-25 12:37:20.919 [main] TRACE ReportController - Exiting deletePhoto method in ReportController class
2024-10-25 12:37:20.919 [main] TRACE ReportController - Entering deleteReport method in ReportController class
2024-10-25 12:37:20.919 [main] INFO  ReportController - Deleting the report with ID: 1 by the user: technician1
2024-10-25 12:37:20.919 [main] TRACE ReportController - Exiting deleteReport method in ReportController class
2024-10-25 12:37:21.058 [main] TRACE ReportController - Entering getReportPdf method in ReportController class
2024-10-25 12:37:21.059 [main] INFO  ReportController - Fetching PDF report for report ID: 1
2024-10-25 12:37:21.059 [main] TRACE ReportController - Exiting getReportPdf method in ReportController class
2024-10-25 12:37:21.060 [main] TRACE ReportController - Entering checkTrIdNumber method in ReportController class
2024-10-25 12:37:21.060 [main] INFO  ReportController - Checking TR ID number: 12345678901 for user: technician1
2024-10-25 12:37:21.060 [main] TRACE ReportController - Exiting checkTrIdNumber method in ReportController class
2024-10-25 12:37:21.060 [main] TRACE ReportController - Entering getPhoto method in ReportController class
2024-10-25 12:37:21.060 [main] INFO  ReportController - Fetching photo for report ID: 1 by user: technician1
2024-10-25 12:37:21.060 [main] TRACE ReportController - Exiting getPhoto method in ReportController class
2024-10-25 12:37:21.076 [main] TRACE ReportController - Entering addPhoto method in ReportController class
2024-10-25 12:37:21.076 [main] INFO  ReportController - Uploading photo for report ID: 1 by user: technician1
2024-10-25 12:37:21.076 [main] TRACE ReportController - Exiting addPhoto method in ReportController class
2024-10-25 12:37:21.878 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2024-10-25 12:37:21.878 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: differentUser
2024-10-25 12:37:21.878 [main] ERROR ReportServiceImpl - Unauthorized access attempt by username: differentUser for report id: 1
2024-10-25 12:37:21.909 [main] TRACE ReportServiceImpl - Entering getReportsByTechnician method in ReportServiceImpl
2024-10-25 12:37:21.909 [main] DEBUG ReportServiceImpl - Fetching reports for technician: technician1 with filters - Page: 0, Size: 10, SortBy: date, Direction: DESC
2024-10-25 12:37:21.909 [main] INFO  ReportServiceImpl - Total reports found for technician technician1: 1
2024-10-25 12:37:21.909 [main] TRACE ReportServiceImpl - Exiting getReportsByTechnician method in ReportServiceImpl
2024-10-25 12:37:21.925 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2024-10-25 12:37:21.925 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2024-10-25 12:37:21.925 [main] ERROR ReportServiceImpl - TR ID number not found in Redis for user: techUser
2024-10-25 12:37:21.925 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2024-10-25 12:37:21.925 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech2
2024-10-25 12:37:21.925 [main] ERROR ReportServiceImpl - Unauthorized update attempt by user: tech2 on report id: 1
2024-10-25 12:37:21.925 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2024-10-25 12:37:21.925 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2024-10-25 12:37:21.925 [main] ERROR ReportServiceImpl - Unauthorized restore attempt by user: tech1 on report id: 1
2024-10-25 12:37:22.082 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2024-10-25 12:37:22.082 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2024-10-25 12:37:22.082 [main] DEBUG ReportServiceImpl - Reading photo from path: backend/uploads/photos/photo.jpg
2024-10-25 12:37:22.082 [main] TRACE ReportServiceImpl - Exiting getPhoto method in ReportServiceImpl
2024-10-25 12:37:22.082 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2024-10-25 12:37:22.082 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2024-10-25 12:37:22.082 [main] ERROR ReportServiceImpl - PDF data is empty or corrupted for username: testUser
2024-10-25 12:37:22.097 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2024-10-25 12:37:22.104 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2024-10-25 12:37:22.104 [main] DEBUG ReportServiceImpl - Deleting photo at path: backend/uploads/photos/photo.jpg
2024-10-25 12:37:22.104 [main] INFO  ReportServiceImpl - Successfully deleted photo for report id: 1
2024-10-25 12:37:22.104 [main] TRACE ReportServiceImpl - Exiting deletePhoto method in ReportServiceImpl
2024-10-25 12:37:22.113 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2024-10-25 12:37:22.113 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: unauthorizedUser
2024-10-25 12:37:22.113 [main] ERROR ReportServiceImpl - Unauthorized deletion attempt by username: unauthorizedUser for report id: 1
2024-10-25 12:37:22.129 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2024-10-25 12:37:22.129 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2024-10-25 12:37:22.129 [main] ERROR ReportServiceImpl - Report not found with ID: 1
2024-10-25 12:37:22.144 [main] TRACE ReportServiceImpl - Entering getReportPdf method in ReportServiceImpl
2024-10-25 12:37:22.145 [main] DEBUG ReportServiceImpl - Generating PDF for report id: 1
2024-10-25 12:37:22.145 [main] ERROR ReportServiceImpl - Report with id: 1 not found
2024-10-25 12:37:22.145 [main] TRACE ReportServiceImpl - Entering getAllReportsFilteredAndSorted method in ReportServiceImpl
2024-10-25 12:37:22.145 [main] DEBUG ReportServiceImpl - Fetching all reports with filters - Page: 0, Size: 10, SortBy: date, Direction: ASC
2024-10-25 12:37:22.145 [main] INFO  ReportServiceImpl - Total reports found: 1
2024-10-25 12:37:22.145 [main] TRACE ReportServiceImpl - Exiting getAllReportsFilteredAndSorted method in ReportServiceImpl
2024-10-25 12:37:22.161 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2024-10-25 12:37:22.161 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2024-10-25 12:37:22.161 [main] INFO  ReportServiceImpl - Report added successfully: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2024-10-25 12:37:22.176 [main] TRACE ReportServiceImpl - Exiting addReport method in ReportServiceImpl
2024-10-25 12:37:22.192 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2024-10-25 12:37:22.192 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2024-10-25 12:37:22.192 [main] ERROR ReportServiceImpl - Report with id: 1 not found for delete photo
2024-10-25 12:37:22.192 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2024-10-25 12:37:22.192 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2024-10-25 12:37:22.192 [main] ERROR ReportServiceImpl - Cached prescription or TR ID number not found for username: testUser
2024-10-25 12:37:22.207 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2024-10-25 12:37:22.207 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2024-10-25 12:37:22.207 [main] ERROR ReportServiceImpl - Report with id: 1 not found for prescription
2024-10-25 12:37:22.207 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2024-10-25 12:37:22.207 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2024-10-25 12:37:22.223 [main] INFO  ReportServiceImpl - Report with id: 1 successfully restored by technician: tech1
2024-10-25 12:37:22.223 [main] TRACE ReportServiceImpl - Exiting restoreReport method in ReportServiceImpl
2024-10-25 12:37:22.223 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2024-10-25 12:37:22.223 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2024-10-25 12:37:22.223 [main] INFO  ReportServiceImpl - Report found: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2024-10-25 12:37:22.223 [main] TRACE ReportServiceImpl - Exiting getReportById method in ReportServiceImpl
2024-10-25 12:37:22.318 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2024-10-25 12:37:22.318 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2024-10-25 12:37:22.318 [main] INFO  ReportServiceImpl - Successfully added photo to report with id: 1
2024-10-25 12:37:22.318 [main] TRACE ReportServiceImpl - Exiting addPhoto method in ReportServiceImpl
2024-10-25 12:37:22.333 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2024-10-25 12:37:22.333 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2024-10-25 12:37:22.333 [main] ERROR ReportServiceImpl - Unauthorized photo upload attempt by user: tech1 on report id: 1
2024-10-25 12:37:22.333 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2024-10-25 12:37:22.333 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2024-10-25 12:37:22.333 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found to restore
2024-10-25 12:37:22.352 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2024-10-25 12:37:22.352 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2024-10-25 12:37:22.352 [main] INFO  ReportServiceImpl - Successfully generated and cached prescription for username: testUser
2024-10-25 12:37:22.352 [main] TRACE ReportServiceImpl - Exiting getPrescription method in ReportServiceImpl
2024-10-25 12:37:22.365 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2024-10-25 12:37:22.365 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2024-10-25 12:37:22.365 [main] INFO  ReportServiceImpl - Report with id: 1 successfully updated by technician: tech1
2024-10-25 12:37:22.365 [main] TRACE ReportServiceImpl - Exiting updateReport method in ReportServiceImpl
2024-10-25 12:37:22.365 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2024-10-25 12:37:22.365 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2024-10-25 12:37:22.365 [main] ERROR ReportServiceImpl - No photo found for report id: 1
2024-10-25 12:37:22.380 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2024-10-25 12:37:22.380 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2024-10-25 12:37:22.380 [main] ERROR ReportServiceImpl - Attempted to add a photo to report with id: 1 which already has a photo
2024-10-25 12:37:22.380 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2024-10-25 12:37:22.380 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2024-10-25 12:37:22.380 [main] ERROR ReportServiceImpl - Report with id 1 not found
2024-10-25 12:37:22.396 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2024-10-25 12:37:22.396 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2024-10-25 12:37:22.396 [main] INFO  ReportServiceImpl - Report with id: 1 successfully deleted by technician: tech1
2024-10-25 12:37:22.396 [main] TRACE ReportServiceImpl - Exiting deleteReport method in ReportServiceImpl
2024-10-25 12:37:22.412 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2024-10-25 12:37:22.412 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech2
2024-10-25 12:37:22.412 [main] ERROR ReportServiceImpl - Unauthorized delete attempt by user: tech2 on report id: 1
2024-10-25 12:37:22.427 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2024-10-25 12:37:22.427 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2024-10-25 12:37:22.427 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found for deletion.
2024-10-25 12:37:22.427 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2024-10-25 12:37:22.427 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2024-10-25 12:37:22.427 [main] ERROR ReportServiceImpl - Report with id 1 not found for add photo
2024-10-25 12:37:22.443 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2024-10-25 12:37:22.443 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2024-10-25 12:37:22.443 [main] ERROR ReportServiceImpl - Unsupported file format: txt for report id: 1
2024-10-25 12:37:22.443 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2024-10-25 12:37:22.443 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2024-10-25 12:37:22.443 [main] ERROR ReportServiceImpl - Report with id: 1 not found for get photo
2024-10-25 12:37:22.458 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2024-10-25 12:37:22.458 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2024-10-25 12:37:22.458 [main] ERROR ReportServiceImpl - No photo to delete for report id: 1
2024-10-25 18:37:24.096 [main] TRACE ReportController - Entering getPrescription method in ReportController class
2024-10-25 18:37:24.125 [main] INFO  ReportController - Fetching prescription for report ID: 1 by user: technician1
2024-10-25 18:37:24.184 [main] TRACE ReportController - Exiting getPrescription method in ReportController class
2024-10-25 18:37:24.275 [main] TRACE ReportController - Entering addReport method in ReportController class
2024-10-25 18:37:24.275 [main] INFO  ReportController - Adding the report by the user: technician1
2024-10-25 18:37:24.277 [main] TRACE ReportController - Exiting addReport method in ReportController class
2024-10-25 18:37:24.305 [main] TRACE ReportController - Entering restoreReport method in ReportController class
2024-10-25 18:37:24.305 [main] INFO  ReportController - Restoring the report with ID: 1 by the user: technician1
2024-10-25 18:37:24.306 [main] TRACE ReportController - Exiting restoreReport method in ReportController class
2024-10-25 18:37:24.311 [main] TRACE ReportController - Entering getReportById method in ReportController class
2024-10-25 18:37:24.311 [main] INFO  ReportController - Retrieving report with ID: 1
2024-10-25 18:37:24.315 [main] TRACE ReportController - Exiting getReportById method in ReportController class
2024-10-25 18:37:24.324 [main] TRACE ReportController - Entering getAllReportsFilteredAndSorted method in ReportController class
2024-10-25 18:37:24.325 [main] INFO  ReportController - Retrieving reports filtered and sorted: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null, deleted=null
2024-10-25 18:37:24.327 [main] TRACE ReportController - Exiting getAllReportsFilteredAndSorted method in ReportController class
2024-10-25 18:37:24.335 [main] TRACE ReportController - Entering updateReport method in ReportController class
2024-10-25 18:37:24.335 [main] INFO  ReportController - Updating the report by the user: technician1
2024-10-25 18:37:24.338 [main] TRACE ReportController - Exiting updateReport method in ReportController class
2024-10-25 18:37:24.343 [main] TRACE ReportController - Entering sendPrescription method in ReportController class
2024-10-25 18:37:24.344 [main] INFO  ReportController - Sending prescription for user: technician1
2024-10-25 18:37:24.346 [main] TRACE ReportController - Exiting sendPrescription method in ReportController class
2024-10-25 18:37:24.355 [main] TRACE ReportController - Entering getAllReportsByTechnician method in ReportController class
2024-10-25 18:37:24.355 [main] INFO  ReportController - Retrieving reports for technician: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, username=technician1, deleted=null
2024-10-25 18:37:24.356 [main] TRACE ReportController - Exiting getAllReportsByTechnician method in ReportController class
2024-10-25 18:37:24.366 [main] TRACE ReportController - Entering deletePhoto method in ReportController class
2024-10-25 18:37:24.366 [main] INFO  ReportController - Deleting photo for report ID: 1 by user: technician1
2024-10-25 18:37:24.366 [main] TRACE ReportController - Exiting deletePhoto method in ReportController class
2024-10-25 18:37:24.375 [main] TRACE ReportController - Entering deleteReport method in ReportController class
2024-10-25 18:37:24.376 [main] INFO  ReportController - Deleting the report with ID: 1 by the user: technician1
2024-10-25 18:37:24.379 [main] TRACE ReportController - Exiting deleteReport method in ReportController class
2024-10-25 18:37:24.715 [main] TRACE ReportController - Entering getReportPdf method in ReportController class
2024-10-25 18:37:24.720 [main] INFO  ReportController - Fetching PDF report for report ID: 1
2024-10-25 18:37:24.720 [main] TRACE ReportController - Exiting getReportPdf method in ReportController class
2024-10-25 18:37:24.724 [main] TRACE ReportController - Entering checkTrIdNumber method in ReportController class
2024-10-25 18:37:24.725 [main] INFO  ReportController - Checking TR ID number: 12345678901 for user: technician1
2024-10-25 18:37:24.725 [main] TRACE ReportController - Exiting checkTrIdNumber method in ReportController class
2024-10-25 18:37:24.738 [main] TRACE ReportController - Entering getPhoto method in ReportController class
2024-10-25 18:37:24.738 [main] INFO  ReportController - Fetching photo for report ID: 1 by user: technician1
2024-10-25 18:37:24.739 [main] TRACE ReportController - Exiting getPhoto method in ReportController class
2024-10-25 18:37:24.748 [main] TRACE ReportController - Entering addPhoto method in ReportController class
2024-10-25 18:37:24.748 [main] INFO  ReportController - Uploading photo for report ID: 1 by user: technician1
2024-10-25 18:37:24.748 [main] TRACE ReportController - Exiting addPhoto method in ReportController class
2024-10-25 18:37:26.445 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2024-10-25 18:37:26.445 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: differentUser
2024-10-25 18:37:26.449 [main] ERROR ReportServiceImpl - Unauthorized access attempt by username: differentUser for report id: 1
2024-10-25 18:37:26.510 [main] TRACE ReportServiceImpl - Entering getReportsByTechnician method in ReportServiceImpl
2024-10-25 18:37:26.510 [main] DEBUG ReportServiceImpl - Fetching reports for technician: technician1 with filters - Page: 0, Size: 10, SortBy: date, Direction: DESC
2024-10-25 18:37:26.521 [main] INFO  ReportServiceImpl - Total reports found for technician technician1: 1
2024-10-25 18:37:26.521 [main] TRACE ReportServiceImpl - Exiting getReportsByTechnician method in ReportServiceImpl
2024-10-25 18:37:26.539 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2024-10-25 18:37:26.539 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2024-10-25 18:37:26.540 [main] ERROR ReportServiceImpl - TR ID number not found in Redis for user: techUser
2024-10-25 18:37:26.557 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2024-10-25 18:37:26.557 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech2
2024-10-25 18:37:26.559 [main] ERROR ReportServiceImpl - Unauthorized update attempt by user: tech2 on report id: 1
2024-10-25 18:37:26.572 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2024-10-25 18:37:26.572 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2024-10-25 18:37:26.574 [main] ERROR ReportServiceImpl - Unauthorized restore attempt by user: tech1 on report id: 1
2024-10-25 18:37:27.015 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2024-10-25 18:37:27.015 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2024-10-25 18:37:27.015 [main] DEBUG ReportServiceImpl - Reading photo from path: backend/uploads/photos/photo.jpg
2024-10-25 18:37:27.015 [main] TRACE ReportServiceImpl - Exiting getPhoto method in ReportServiceImpl
2024-10-25 18:37:27.026 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2024-10-25 18:37:27.026 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2024-10-25 18:37:27.026 [main] ERROR ReportServiceImpl - PDF data is empty or corrupted for username: testUser
2024-10-25 18:37:27.038 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2024-10-25 18:37:27.039 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2024-10-25 18:37:27.039 [main] DEBUG ReportServiceImpl - Deleting photo at path: backend/uploads/photos/photo.jpg
2024-10-25 18:37:27.040 [main] INFO  ReportServiceImpl - Successfully deleted photo for report id: 1
2024-10-25 18:37:27.040 [main] TRACE ReportServiceImpl - Exiting deletePhoto method in ReportServiceImpl
2024-10-25 18:37:27.053 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2024-10-25 18:37:27.053 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: unauthorizedUser
2024-10-25 18:37:27.053 [main] ERROR ReportServiceImpl - Unauthorized deletion attempt by username: unauthorizedUser for report id: 1
2024-10-25 18:37:27.059 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2024-10-25 18:37:27.059 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2024-10-25 18:37:27.065 [main] ERROR ReportServiceImpl - Report not found with ID: 1
2024-10-25 18:37:27.071 [main] TRACE ReportServiceImpl - Entering getReportPdf method in ReportServiceImpl
2024-10-25 18:37:27.072 [main] DEBUG ReportServiceImpl - Generating PDF for report id: 1
2024-10-25 18:37:27.072 [main] ERROR ReportServiceImpl - Report with id: 1 not found
2024-10-25 18:37:27.084 [main] TRACE ReportServiceImpl - Entering getAllReportsFilteredAndSorted method in ReportServiceImpl
2024-10-25 18:37:27.085 [main] DEBUG ReportServiceImpl - Fetching all reports with filters - Page: 0, Size: 10, SortBy: date, Direction: ASC
2024-10-25 18:37:27.086 [main] INFO  ReportServiceImpl - Total reports found: 1
2024-10-25 18:37:27.086 [main] TRACE ReportServiceImpl - Exiting getAllReportsFilteredAndSorted method in ReportServiceImpl
2024-10-25 18:37:27.095 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2024-10-25 18:37:27.095 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2024-10-25 18:37:27.099 [main] INFO  ReportServiceImpl - Report added successfully: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2024-10-25 18:37:27.119 [main] TRACE ReportServiceImpl - Exiting addReport method in ReportServiceImpl
2024-10-25 18:37:27.126 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2024-10-25 18:37:27.126 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2024-10-25 18:37:27.126 [main] ERROR ReportServiceImpl - Report with id: 1 not found for delete photo
2024-10-25 18:37:27.137 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2024-10-25 18:37:27.138 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2024-10-25 18:37:27.139 [main] ERROR ReportServiceImpl - Cached prescription or TR ID number not found for username: testUser
2024-10-25 18:37:27.147 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2024-10-25 18:37:27.147 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2024-10-25 18:37:27.152 [main] ERROR ReportServiceImpl - Report with id: 1 not found for prescription
2024-10-25 18:37:27.159 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2024-10-25 18:37:27.159 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2024-10-25 18:37:27.159 [main] INFO  ReportServiceImpl - Report with id: 1 successfully restored by technician: tech1
2024-10-25 18:37:27.159 [main] TRACE ReportServiceImpl - Exiting restoreReport method in ReportServiceImpl
2024-10-25 18:37:27.171 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2024-10-25 18:37:27.171 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2024-10-25 18:37:27.171 [main] INFO  ReportServiceImpl - Report found: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2024-10-25 18:37:27.172 [main] TRACE ReportServiceImpl - Exiting getReportById method in ReportServiceImpl
2024-10-25 18:37:27.340 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2024-10-25 18:37:27.342 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2024-10-25 18:37:27.365 [main] INFO  ReportServiceImpl - Successfully added photo to report with id: 1
2024-10-25 18:37:27.365 [main] TRACE ReportServiceImpl - Exiting addPhoto method in ReportServiceImpl
2024-10-25 18:37:27.371 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2024-10-25 18:37:27.371 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2024-10-25 18:37:27.371 [main] ERROR ReportServiceImpl - Unauthorized photo upload attempt by user: tech1 on report id: 1
2024-10-25 18:37:27.376 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2024-10-25 18:37:27.376 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2024-10-25 18:37:27.376 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found to restore
2024-10-25 18:37:27.387 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2024-10-25 18:37:27.388 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2024-10-25 18:37:27.388 [main] INFO  ReportServiceImpl - Successfully generated and cached prescription for username: testUser
2024-10-25 18:37:27.388 [main] TRACE ReportServiceImpl - Exiting getPrescription method in ReportServiceImpl
2024-10-25 18:37:27.397 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2024-10-25 18:37:27.397 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2024-10-25 18:37:27.401 [main] INFO  ReportServiceImpl - Report with id: 1 successfully updated by technician: tech1
2024-10-25 18:37:27.401 [main] TRACE ReportServiceImpl - Exiting updateReport method in ReportServiceImpl
2024-10-25 18:37:27.405 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2024-10-25 18:37:27.405 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2024-10-25 18:37:27.405 [main] ERROR ReportServiceImpl - No photo found for report id: 1
2024-10-25 18:37:27.414 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2024-10-25 18:37:27.415 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2024-10-25 18:37:27.416 [main] ERROR ReportServiceImpl - Attempted to add a photo to report with id: 1 which already has a photo
2024-10-25 18:37:27.422 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2024-10-25 18:37:27.422 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2024-10-25 18:37:27.423 [main] ERROR ReportServiceImpl - Report with id 1 not found
2024-10-25 18:37:27.425 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2024-10-25 18:37:27.425 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2024-10-25 18:37:27.425 [main] INFO  ReportServiceImpl - Report with id: 1 successfully deleted by technician: tech1
2024-10-25 18:37:27.425 [main] TRACE ReportServiceImpl - Exiting deleteReport method in ReportServiceImpl
2024-10-25 18:37:27.439 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2024-10-25 18:37:27.439 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech2
2024-10-25 18:37:27.440 [main] ERROR ReportServiceImpl - Unauthorized delete attempt by user: tech2 on report id: 1
2024-10-25 18:37:27.449 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2024-10-25 18:37:27.449 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2024-10-25 18:37:27.451 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found for deletion.
2024-10-25 18:37:27.457 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2024-10-25 18:37:27.457 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2024-10-25 18:37:27.459 [main] ERROR ReportServiceImpl - Report with id 1 not found for add photo
2024-10-25 18:37:27.469 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2024-10-25 18:37:27.469 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2024-10-25 18:37:27.469 [main] ERROR ReportServiceImpl - Unsupported file format: txt for report id: 1
2024-10-25 18:37:27.473 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2024-10-25 18:37:27.473 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2024-10-25 18:37:27.473 [main] ERROR ReportServiceImpl - Report with id: 1 not found for get photo
2024-10-25 18:37:27.484 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2024-10-25 18:37:27.484 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2024-10-25 18:37:27.485 [main] ERROR ReportServiceImpl - No photo to delete for report id: 1
