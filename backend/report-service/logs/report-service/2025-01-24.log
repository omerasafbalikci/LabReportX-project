2025-01-24 20:52:36.922 [main] TRACE ReportController - Entering getPrescription method in ReportController class
2025-01-24 20:52:36.929 [main] INFO  ReportController - Fetching prescription for report ID: 1 by user: technician1
2025-01-24 20:52:36.959 [main] TRACE ReportController - Exiting getPrescription method in ReportController class
2025-01-24 20:52:37.021 [main] TRACE ReportController - Entering addReport method in ReportController class
2025-01-24 20:52:37.021 [main] INFO  ReportController - Adding the report by the user: technician1
2025-01-24 20:52:37.022 [main] TRACE ReportController - Exiting addReport method in ReportController class
2025-01-24 20:52:37.042 [main] TRACE ReportController - Entering restoreReport method in ReportController class
2025-01-24 20:52:37.043 [main] INFO  ReportController - Restoring the report with ID: 1 by the user: technician1
2025-01-24 20:52:37.044 [main] TRACE ReportController - Exiting restoreReport method in ReportController class
2025-01-24 20:52:37.050 [main] TRACE ReportController - Entering getReportById method in ReportController class
2025-01-24 20:52:37.051 [main] INFO  ReportController - Retrieving report with ID: 1
2025-01-24 20:52:37.052 [main] TRACE ReportController - Exiting getReportById method in ReportController class
2025-01-24 20:52:37.059 [main] TRACE ReportController - Entering getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 20:52:37.059 [main] INFO  ReportController - Retrieving reports filtered and sorted: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null, deleted=null
2025-01-24 20:52:37.060 [main] TRACE ReportController - Exiting getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 20:52:37.066 [main] TRACE ReportController - Entering updateReport method in ReportController class
2025-01-24 20:52:37.067 [main] INFO  ReportController - Updating the report by the user: technician1
2025-01-24 20:52:37.067 [main] TRACE ReportController - Exiting updateReport method in ReportController class
2025-01-24 20:52:37.072 [main] TRACE ReportController - Entering sendPrescription method in ReportController class
2025-01-24 20:52:37.073 [main] INFO  ReportController - Sending prescription for user: technician1
2025-01-24 20:52:37.074 [main] TRACE ReportController - Exiting sendPrescription method in ReportController class
2025-01-24 20:52:37.079 [main] TRACE ReportController - Entering getAllReportsByTechnician method in ReportController class
2025-01-24 20:52:37.080 [main] INFO  ReportController - Retrieving reports for technician: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, username=technician1, deleted=null
2025-01-24 20:52:37.081 [main] TRACE ReportController - Exiting getAllReportsByTechnician method in ReportController class
2025-01-24 20:52:37.087 [main] TRACE ReportController - Entering deletePhoto method in ReportController class
2025-01-24 20:52:37.088 [main] INFO  ReportController - Deleting photo for report ID: 1 by user: technician1
2025-01-24 20:52:37.088 [main] TRACE ReportController - Exiting deletePhoto method in ReportController class
2025-01-24 20:52:37.094 [main] TRACE ReportController - Entering deleteReport method in ReportController class
2025-01-24 20:52:37.094 [main] INFO  ReportController - Deleting the report with ID: 1 by the user: technician1
2025-01-24 20:52:37.095 [main] TRACE ReportController - Exiting deleteReport method in ReportController class
2025-01-24 20:52:37.202 [main] TRACE ReportController - Entering getReportPdf method in ReportController class
2025-01-24 20:52:37.202 [main] INFO  ReportController - Fetching PDF report for report ID: 1
2025-01-24 20:52:37.203 [main] TRACE ReportController - Exiting getReportPdf method in ReportController class
2025-01-24 20:52:37.207 [main] TRACE ReportController - Entering checkTrIdNumber method in ReportController class
2025-01-24 20:52:37.207 [main] INFO  ReportController - Checking TR ID number: 12345678901 for user: technician1
2025-01-24 20:52:37.207 [main] TRACE ReportController - Exiting checkTrIdNumber method in ReportController class
2025-01-24 20:52:37.211 [main] TRACE ReportController - Entering getPhoto method in ReportController class
2025-01-24 20:52:37.212 [main] INFO  ReportController - Fetching photo for report ID: 1 by user: technician1
2025-01-24 20:52:37.212 [main] TRACE ReportController - Exiting getPhoto method in ReportController class
2025-01-24 20:52:37.216 [main] TRACE ReportController - Entering addPhoto method in ReportController class
2025-01-24 20:52:37.217 [main] INFO  ReportController - Uploading photo for report ID: 1 by user: technician1
2025-01-24 20:52:37.217 [main] TRACE ReportController - Exiting addPhoto method in ReportController class
2025-01-24 20:52:37.937 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 20:52:37.937 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: differentUser
2025-01-24 20:52:37.940 [main] ERROR ReportServiceImpl - Unauthorized access attempt by username: differentUser for report id: 1
2025-01-24 20:52:37.964 [main] TRACE ReportServiceImpl - Entering getReportsByTechnician method in ReportServiceImpl
2025-01-24 20:52:37.964 [main] DEBUG ReportServiceImpl - Fetching reports for technician: technician1 with filters - Page: 0, Size: 10, SortBy: date, Direction: DESC
2025-01-24 20:52:37.970 [main] INFO  ReportServiceImpl - Total reports found for technician technician1: 1
2025-01-24 20:52:37.970 [main] TRACE ReportServiceImpl - Exiting getReportsByTechnician method in ReportServiceImpl
2025-01-24 20:52:37.980 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 20:52:37.980 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 20:52:37.981 [main] ERROR ReportServiceImpl - TR ID number not found in Redis for user: techUser
2025-01-24 20:52:37.988 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 20:52:37.989 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech2
2025-01-24 20:52:37.990 [main] ERROR ReportServiceImpl - Unauthorized update attempt by user: tech2 on report id: 1
2025-01-24 20:52:37.996 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 20:52:37.997 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 20:52:37.998 [main] ERROR ReportServiceImpl - Unauthorized restore attempt by user: tech1 on report id: 1
2025-01-24 20:52:38.123 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 20:52:38.123 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 20:52:38.124 [main] DEBUG ReportServiceImpl - Reading photo from path: backend/uploads/photos/photo.jpg
2025-01-24 20:52:38.124 [main] TRACE ReportServiceImpl - Exiting getPhoto method in ReportServiceImpl
2025-01-24 20:52:38.131 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 20:52:38.131 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 20:52:38.132 [main] ERROR ReportServiceImpl - PDF data is empty or corrupted for username: testUser
2025-01-24 20:52:38.140 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 20:52:38.140 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 20:52:38.141 [main] DEBUG ReportServiceImpl - Deleting photo at path: backend/uploads/photos/photo.jpg
2025-01-24 20:52:38.142 [main] INFO  ReportServiceImpl - Successfully deleted photo for report id: 1
2025-01-24 20:52:38.142 [main] TRACE ReportServiceImpl - Exiting deletePhoto method in ReportServiceImpl
2025-01-24 20:52:38.154 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 20:52:38.155 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: unauthorizedUser
2025-01-24 20:52:38.155 [main] ERROR ReportServiceImpl - Unauthorized deletion attempt by username: unauthorizedUser for report id: 1
2025-01-24 20:52:38.163 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 20:52:38.164 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 20:52:38.165 [main] ERROR ReportServiceImpl - Report not found with ID: 1
2025-01-24 20:52:38.175 [main] TRACE ReportServiceImpl - Entering getReportPdf method in ReportServiceImpl
2025-01-24 20:52:38.175 [main] DEBUG ReportServiceImpl - Generating PDF for report id: 1
2025-01-24 20:52:38.176 [main] ERROR ReportServiceImpl - Report with id: 1 not found
2025-01-24 20:52:38.183 [main] TRACE ReportServiceImpl - Entering getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 20:52:38.183 [main] DEBUG ReportServiceImpl - Fetching all reports with filters - Page: 0, Size: 10, SortBy: date, Direction: ASC
2025-01-24 20:52:38.185 [main] INFO  ReportServiceImpl - Total reports found: 1
2025-01-24 20:52:38.186 [main] TRACE ReportServiceImpl - Exiting getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 20:52:38.192 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 20:52:38.193 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 20:52:38.194 [main] INFO  ReportServiceImpl - Report added successfully: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 20:52:38.211 [main] TRACE ReportServiceImpl - Exiting addReport method in ReportServiceImpl
2025-01-24 20:52:38.219 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 20:52:38.220 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 20:52:38.220 [main] ERROR ReportServiceImpl - Report with id: 1 not found for delete photo
2025-01-24 20:52:38.230 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 20:52:38.231 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 20:52:38.232 [main] ERROR ReportServiceImpl - Cached prescription or TR ID number not found for username: testUser
2025-01-24 20:52:38.242 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 20:52:38.243 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 20:52:38.248 [main] ERROR ReportServiceImpl - Report with id: 1 not found for prescription
2025-01-24 20:52:38.259 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 20:52:38.260 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 20:52:38.261 [main] INFO  ReportServiceImpl - Report with id: 1 successfully restored by technician: tech1
2025-01-24 20:52:38.261 [main] TRACE ReportServiceImpl - Exiting restoreReport method in ReportServiceImpl
2025-01-24 20:52:38.271 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 20:52:38.271 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 20:52:38.271 [main] INFO  ReportServiceImpl - Report found: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 20:52:38.271 [main] TRACE ReportServiceImpl - Exiting getReportById method in ReportServiceImpl
2025-01-24 20:52:38.279 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 20:52:38.279 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 20:52:38.280 [main] ERROR ReportServiceImpl - Unauthorized photo upload attempt by user: tech1 on report id: 1
2025-01-24 20:52:38.287 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 20:52:38.287 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 20:52:38.288 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found to restore
2025-01-24 20:52:38.295 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 20:52:38.296 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 20:52:38.297 [main] INFO  ReportServiceImpl - Successfully generated and cached prescription for username: testUser
2025-01-24 20:52:38.298 [main] TRACE ReportServiceImpl - Exiting getPrescription method in ReportServiceImpl
2025-01-24 20:52:38.303 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 20:52:38.304 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 20:52:38.305 [main] INFO  ReportServiceImpl - Report with id: 1 successfully updated by technician: tech1
2025-01-24 20:52:38.305 [main] TRACE ReportServiceImpl - Exiting updateReport method in ReportServiceImpl
2025-01-24 20:52:38.310 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 20:52:38.311 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 20:52:38.311 [main] ERROR ReportServiceImpl - No photo found for report id: 1
2025-01-24 20:52:38.350 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 20:52:38.350 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 20:52:38.351 [main] ERROR ReportServiceImpl - Attempted to add a photo to report with id: 1 which already has a photo
2025-01-24 20:52:38.358 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 20:52:38.358 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 20:52:38.359 [main] ERROR ReportServiceImpl - Report with id 1 not found
2025-01-24 20:52:38.367 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 20:52:38.367 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 20:52:38.368 [main] INFO  ReportServiceImpl - Report with id: 1 successfully deleted by technician: tech1
2025-01-24 20:52:38.368 [main] TRACE ReportServiceImpl - Exiting deleteReport method in ReportServiceImpl
2025-01-24 20:52:38.378 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 20:52:38.378 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech2
2025-01-24 20:52:38.379 [main] ERROR ReportServiceImpl - Unauthorized delete attempt by user: tech2 on report id: 1
2025-01-24 20:52:38.386 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 20:52:38.387 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 20:52:38.387 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found for deletion.
2025-01-24 20:52:38.396 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 20:52:38.397 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 20:52:38.397 [main] ERROR ReportServiceImpl - Report with id 1 not found for add photo
2025-01-24 20:52:38.407 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 20:52:38.408 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 20:52:38.409 [main] ERROR ReportServiceImpl - Unsupported file format: txt for report id: 1
2025-01-24 20:52:38.417 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 20:52:38.417 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 20:52:38.418 [main] ERROR ReportServiceImpl - Report with id: 1 not found for get photo
2025-01-24 20:52:38.426 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 20:52:38.427 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 20:52:38.427 [main] ERROR ReportServiceImpl - No photo to delete for report id: 1
2025-01-24 21:01:21.900 [main] TRACE ReportController - Entering getPrescription method in ReportController class
2025-01-24 21:01:21.912 [main] INFO  ReportController - Fetching prescription for report ID: 1 by user: technician1
2025-01-24 21:01:21.980 [main] TRACE ReportController - Exiting getPrescription method in ReportController class
2025-01-24 21:01:22.057 [main] TRACE ReportController - Entering addReport method in ReportController class
2025-01-24 21:01:22.058 [main] INFO  ReportController - Adding the report by the user: technician1
2025-01-24 21:01:22.058 [main] TRACE ReportController - Exiting addReport method in ReportController class
2025-01-24 21:01:22.086 [main] TRACE ReportController - Entering restoreReport method in ReportController class
2025-01-24 21:01:22.086 [main] INFO  ReportController - Restoring the report with ID: 1 by the user: technician1
2025-01-24 21:01:22.086 [main] TRACE ReportController - Exiting restoreReport method in ReportController class
2025-01-24 21:01:22.092 [main] TRACE ReportController - Entering getReportById method in ReportController class
2025-01-24 21:01:22.092 [main] INFO  ReportController - Retrieving report with ID: 1
2025-01-24 21:01:22.092 [main] TRACE ReportController - Exiting getReportById method in ReportController class
2025-01-24 21:01:22.098 [main] TRACE ReportController - Entering getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 21:01:22.099 [main] INFO  ReportController - Retrieving reports filtered and sorted: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null, deleted=null
2025-01-24 21:01:22.100 [main] TRACE ReportController - Exiting getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 21:01:22.105 [main] TRACE ReportController - Entering updateReport method in ReportController class
2025-01-24 21:01:22.106 [main] INFO  ReportController - Updating the report by the user: technician1
2025-01-24 21:01:22.107 [main] TRACE ReportController - Exiting updateReport method in ReportController class
2025-01-24 21:01:22.112 [main] TRACE ReportController - Entering sendPrescription method in ReportController class
2025-01-24 21:01:22.112 [main] INFO  ReportController - Sending prescription for user: technician1
2025-01-24 21:01:22.112 [main] TRACE ReportController - Exiting sendPrescription method in ReportController class
2025-01-24 21:01:22.118 [main] TRACE ReportController - Entering getAllReportsByTechnician method in ReportController class
2025-01-24 21:01:22.124 [main] INFO  ReportController - Retrieving reports for technician: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, username=technician1, deleted=null
2025-01-24 21:01:22.125 [main] TRACE ReportController - Exiting getAllReportsByTechnician method in ReportController class
2025-01-24 21:01:22.129 [main] TRACE ReportController - Entering deletePhoto method in ReportController class
2025-01-24 21:01:22.130 [main] INFO  ReportController - Deleting photo for report ID: 1 by user: technician1
2025-01-24 21:01:22.130 [main] TRACE ReportController - Exiting deletePhoto method in ReportController class
2025-01-24 21:01:22.134 [main] TRACE ReportController - Entering deleteReport method in ReportController class
2025-01-24 21:01:22.135 [main] INFO  ReportController - Deleting the report with ID: 1 by the user: technician1
2025-01-24 21:01:22.135 [main] TRACE ReportController - Exiting deleteReport method in ReportController class
2025-01-24 21:01:22.302 [main] TRACE ReportController - Entering getReportPdf method in ReportController class
2025-01-24 21:01:22.302 [main] INFO  ReportController - Fetching PDF report for report ID: 1
2025-01-24 21:01:22.303 [main] TRACE ReportController - Exiting getReportPdf method in ReportController class
2025-01-24 21:01:22.309 [main] TRACE ReportController - Entering checkTrIdNumber method in ReportController class
2025-01-24 21:01:22.309 [main] INFO  ReportController - Checking TR ID number: 12345678901 for user: technician1
2025-01-24 21:01:22.309 [main] TRACE ReportController - Exiting checkTrIdNumber method in ReportController class
2025-01-24 21:01:22.316 [main] TRACE ReportController - Entering getPhoto method in ReportController class
2025-01-24 21:01:22.317 [main] INFO  ReportController - Fetching photo for report ID: 1 by user: technician1
2025-01-24 21:01:22.318 [main] TRACE ReportController - Exiting getPhoto method in ReportController class
2025-01-24 21:01:22.328 [main] TRACE ReportController - Entering addPhoto method in ReportController class
2025-01-24 21:01:22.331 [main] INFO  ReportController - Uploading photo for report ID: 1 by user: technician1
2025-01-24 21:01:22.331 [main] TRACE ReportController - Exiting addPhoto method in ReportController class
2025-01-24 21:01:23.349 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 21:01:23.350 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: differentUser
2025-01-24 21:01:23.355 [main] ERROR ReportServiceImpl - Unauthorized access attempt by username: differentUser for report id: 1
2025-01-24 21:01:23.384 [main] TRACE ReportServiceImpl - Entering getReportsByTechnician method in ReportServiceImpl
2025-01-24 21:01:23.384 [main] DEBUG ReportServiceImpl - Fetching reports for technician: technician1 with filters - Page: 0, Size: 10, SortBy: date, Direction: DESC
2025-01-24 21:01:23.392 [main] INFO  ReportServiceImpl - Total reports found for technician technician1: 1
2025-01-24 21:01:23.393 [main] TRACE ReportServiceImpl - Exiting getReportsByTechnician method in ReportServiceImpl
2025-01-24 21:01:23.402 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 21:01:23.402 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 21:01:23.403 [main] ERROR ReportServiceImpl - TR ID number not found in Redis for user: techUser
2025-01-24 21:01:23.413 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 21:01:23.413 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech2
2025-01-24 21:01:23.413 [main] ERROR ReportServiceImpl - Unauthorized update attempt by user: tech2 on report id: 1
2025-01-24 21:01:23.421 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 21:01:23.421 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 21:01:23.422 [main] ERROR ReportServiceImpl - Unauthorized restore attempt by user: tech1 on report id: 1
2025-01-24 21:01:23.603 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 21:01:23.603 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 21:01:23.604 [main] DEBUG ReportServiceImpl - Reading photo from path: backend/uploads/photos/photo.jpg
2025-01-24 21:01:23.604 [main] TRACE ReportServiceImpl - Exiting getPhoto method in ReportServiceImpl
2025-01-24 21:01:23.615 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 21:01:23.616 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 21:01:23.618 [main] ERROR ReportServiceImpl - PDF data is empty or corrupted for username: testUser
2025-01-24 21:01:23.626 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 21:01:23.626 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 21:01:23.627 [main] DEBUG ReportServiceImpl - Deleting photo at path: backend/uploads/photos/photo.jpg
2025-01-24 21:01:23.628 [main] INFO  ReportServiceImpl - Successfully deleted photo for report id: 1
2025-01-24 21:01:23.629 [main] TRACE ReportServiceImpl - Exiting deletePhoto method in ReportServiceImpl
2025-01-24 21:01:23.641 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 21:01:23.641 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: unauthorizedUser
2025-01-24 21:01:23.643 [main] ERROR ReportServiceImpl - Unauthorized deletion attempt by username: unauthorizedUser for report id: 1
2025-01-24 21:01:23.654 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 21:01:23.655 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 21:01:23.655 [main] ERROR ReportServiceImpl - Report not found with ID: 1
2025-01-24 21:01:23.664 [main] TRACE ReportServiceImpl - Entering getReportPdf method in ReportServiceImpl
2025-01-24 21:01:23.665 [main] DEBUG ReportServiceImpl - Generating PDF for report id: 1
2025-01-24 21:01:23.667 [main] ERROR ReportServiceImpl - Report with id: 1 not found
2025-01-24 21:01:23.673 [main] TRACE ReportServiceImpl - Entering getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 21:01:23.673 [main] DEBUG ReportServiceImpl - Fetching all reports with filters - Page: 0, Size: 10, SortBy: date, Direction: ASC
2025-01-24 21:01:23.675 [main] INFO  ReportServiceImpl - Total reports found: 1
2025-01-24 21:01:23.675 [main] TRACE ReportServiceImpl - Exiting getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 21:01:23.683 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 21:01:23.684 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 21:01:23.686 [main] INFO  ReportServiceImpl - Report added successfully: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 21:01:23.700 [main] TRACE ReportServiceImpl - Exiting addReport method in ReportServiceImpl
2025-01-24 21:01:23.708 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 21:01:23.709 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 21:01:23.709 [main] ERROR ReportServiceImpl - Report with id: 1 not found for delete photo
2025-01-24 21:01:23.716 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 21:01:23.716 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 21:01:23.717 [main] ERROR ReportServiceImpl - Cached prescription or TR ID number not found for username: testUser
2025-01-24 21:01:23.723 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 21:01:23.723 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 21:01:23.725 [main] ERROR ReportServiceImpl - Report with id: 1 not found for prescription
2025-01-24 21:01:23.731 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 21:01:23.731 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 21:01:23.732 [main] INFO  ReportServiceImpl - Report with id: 1 successfully restored by technician: tech1
2025-01-24 21:01:23.732 [main] TRACE ReportServiceImpl - Exiting restoreReport method in ReportServiceImpl
2025-01-24 21:01:23.740 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 21:01:23.742 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 21:01:23.742 [main] INFO  ReportServiceImpl - Report found: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 21:01:23.743 [main] TRACE ReportServiceImpl - Exiting getReportById method in ReportServiceImpl
2025-01-24 21:01:23.750 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 21:01:23.750 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 21:01:23.750 [main] ERROR ReportServiceImpl - Unauthorized photo upload attempt by user: tech1 on report id: 1
2025-01-24 21:01:23.756 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 21:01:23.756 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 21:01:23.756 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found to restore
2025-01-24 21:01:23.762 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 21:01:23.763 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 21:01:23.764 [main] INFO  ReportServiceImpl - Successfully generated and cached prescription for username: testUser
2025-01-24 21:01:23.764 [main] TRACE ReportServiceImpl - Exiting getPrescription method in ReportServiceImpl
2025-01-24 21:01:23.775 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 21:01:23.776 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 21:01:23.777 [main] INFO  ReportServiceImpl - Report with id: 1 successfully updated by technician: tech1
2025-01-24 21:01:23.777 [main] TRACE ReportServiceImpl - Exiting updateReport method in ReportServiceImpl
2025-01-24 21:01:23.782 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 21:01:23.783 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 21:01:23.783 [main] ERROR ReportServiceImpl - No photo found for report id: 1
2025-01-24 21:01:23.846 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 21:01:23.846 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 21:01:23.847 [main] ERROR ReportServiceImpl - Attempted to add a photo to report with id: 1 which already has a photo
2025-01-24 21:01:23.854 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 21:01:23.854 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 21:01:23.854 [main] ERROR ReportServiceImpl - Report with id 1 not found
2025-01-24 21:01:23.860 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 21:01:23.860 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 21:01:23.862 [main] INFO  ReportServiceImpl - Report with id: 1 successfully deleted by technician: tech1
2025-01-24 21:01:23.862 [main] TRACE ReportServiceImpl - Exiting deleteReport method in ReportServiceImpl
2025-01-24 21:01:23.868 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 21:01:23.869 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech2
2025-01-24 21:01:23.870 [main] ERROR ReportServiceImpl - Unauthorized delete attempt by user: tech2 on report id: 1
2025-01-24 21:01:23.880 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 21:01:23.880 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 21:01:23.882 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found for deletion.
2025-01-24 21:01:23.891 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 21:01:23.891 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 21:01:23.891 [main] ERROR ReportServiceImpl - Report with id 1 not found for add photo
2025-01-24 21:01:23.899 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 21:01:23.899 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 21:01:23.901 [main] ERROR ReportServiceImpl - Unsupported file format: txt for report id: 1
2025-01-24 21:01:23.907 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 21:01:23.907 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 21:01:23.907 [main] ERROR ReportServiceImpl - Report with id: 1 not found for get photo
2025-01-24 21:01:23.913 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 21:01:23.913 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 21:01:23.913 [main] ERROR ReportServiceImpl - No photo to delete for report id: 1
2025-01-24 21:18:51.692 [main] TRACE ReportController - Entering getPrescription method in ReportController class
2025-01-24 21:18:51.699 [main] INFO  ReportController - Fetching prescription for report ID: 1 by user: technician1
2025-01-24 21:18:51.725 [main] TRACE ReportController - Exiting getPrescription method in ReportController class
2025-01-24 21:18:51.766 [main] TRACE ReportController - Entering addReport method in ReportController class
2025-01-24 21:18:51.767 [main] INFO  ReportController - Adding the report by the user: technician1
2025-01-24 21:18:51.767 [main] TRACE ReportController - Exiting addReport method in ReportController class
2025-01-24 21:18:51.780 [main] TRACE ReportController - Entering restoreReport method in ReportController class
2025-01-24 21:18:51.780 [main] INFO  ReportController - Restoring the report with ID: 1 by the user: technician1
2025-01-24 21:18:51.781 [main] TRACE ReportController - Exiting restoreReport method in ReportController class
2025-01-24 21:18:51.784 [main] TRACE ReportController - Entering getReportById method in ReportController class
2025-01-24 21:18:51.784 [main] INFO  ReportController - Retrieving report with ID: 1
2025-01-24 21:18:51.784 [main] TRACE ReportController - Exiting getReportById method in ReportController class
2025-01-24 21:18:51.788 [main] TRACE ReportController - Entering getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 21:18:51.788 [main] INFO  ReportController - Retrieving reports filtered and sorted: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null, deleted=null
2025-01-24 21:18:51.789 [main] TRACE ReportController - Exiting getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 21:18:51.792 [main] TRACE ReportController - Entering updateReport method in ReportController class
2025-01-24 21:18:51.792 [main] INFO  ReportController - Updating the report by the user: technician1
2025-01-24 21:18:51.793 [main] TRACE ReportController - Exiting updateReport method in ReportController class
2025-01-24 21:18:51.796 [main] TRACE ReportController - Entering sendPrescription method in ReportController class
2025-01-24 21:18:51.796 [main] INFO  ReportController - Sending prescription for user: technician1
2025-01-24 21:18:51.796 [main] TRACE ReportController - Exiting sendPrescription method in ReportController class
2025-01-24 21:18:51.799 [main] TRACE ReportController - Entering getAllReportsByTechnician method in ReportController class
2025-01-24 21:18:51.800 [main] INFO  ReportController - Retrieving reports for technician: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, username=technician1, deleted=null
2025-01-24 21:18:51.800 [main] TRACE ReportController - Exiting getAllReportsByTechnician method in ReportController class
2025-01-24 21:18:51.803 [main] TRACE ReportController - Entering deletePhoto method in ReportController class
2025-01-24 21:18:51.803 [main] INFO  ReportController - Deleting photo for report ID: 1 by user: technician1
2025-01-24 21:18:51.804 [main] TRACE ReportController - Exiting deletePhoto method in ReportController class
2025-01-24 21:18:51.807 [main] TRACE ReportController - Entering deleteReport method in ReportController class
2025-01-24 21:18:51.807 [main] INFO  ReportController - Deleting the report with ID: 1 by the user: technician1
2025-01-24 21:18:51.808 [main] TRACE ReportController - Exiting deleteReport method in ReportController class
2025-01-24 21:18:51.892 [main] TRACE ReportController - Entering getReportPdf method in ReportController class
2025-01-24 21:18:51.892 [main] INFO  ReportController - Fetching PDF report for report ID: 1
2025-01-24 21:18:51.893 [main] TRACE ReportController - Exiting getReportPdf method in ReportController class
2025-01-24 21:18:51.899 [main] TRACE ReportController - Entering checkTrIdNumber method in ReportController class
2025-01-24 21:18:51.899 [main] INFO  ReportController - Checking TR ID number: 12345678901 for user: technician1
2025-01-24 21:18:51.899 [main] TRACE ReportController - Exiting checkTrIdNumber method in ReportController class
2025-01-24 21:18:51.905 [main] TRACE ReportController - Entering getPhoto method in ReportController class
2025-01-24 21:18:51.905 [main] INFO  ReportController - Fetching photo for report ID: 1 by user: technician1
2025-01-24 21:18:51.906 [main] TRACE ReportController - Exiting getPhoto method in ReportController class
2025-01-24 21:18:51.912 [main] TRACE ReportController - Entering addPhoto method in ReportController class
2025-01-24 21:18:51.912 [main] INFO  ReportController - Uploading photo for report ID: 1 by user: technician1
2025-01-24 21:18:51.912 [main] TRACE ReportController - Exiting addPhoto method in ReportController class
2025-01-24 21:18:52.512 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 21:18:52.512 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: differentUser
2025-01-24 21:18:52.514 [main] ERROR ReportServiceImpl - Unauthorized access attempt by username: differentUser for report id: 1
2025-01-24 21:18:52.531 [main] TRACE ReportServiceImpl - Entering getReportsByTechnician method in ReportServiceImpl
2025-01-24 21:18:52.531 [main] DEBUG ReportServiceImpl - Fetching reports for technician: technician1 with filters - Page: 0, Size: 10, SortBy: date, Direction: DESC
2025-01-24 21:18:52.535 [main] INFO  ReportServiceImpl - Total reports found for technician technician1: 1
2025-01-24 21:18:52.535 [main] TRACE ReportServiceImpl - Exiting getReportsByTechnician method in ReportServiceImpl
2025-01-24 21:18:52.542 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 21:18:52.542 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 21:18:52.543 [main] ERROR ReportServiceImpl - TR ID number not found in Redis for user: techUser
2025-01-24 21:18:52.549 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 21:18:52.549 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech2
2025-01-24 21:18:52.550 [main] ERROR ReportServiceImpl - Unauthorized update attempt by user: tech2 on report id: 1
2025-01-24 21:18:52.554 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 21:18:52.555 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 21:18:52.555 [main] ERROR ReportServiceImpl - Unauthorized restore attempt by user: tech1 on report id: 1
2025-01-24 21:18:52.646 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 21:18:52.646 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 21:18:52.646 [main] DEBUG ReportServiceImpl - Reading photo from path: backend/uploads/photos/photo.jpg
2025-01-24 21:18:52.646 [main] TRACE ReportServiceImpl - Exiting getPhoto method in ReportServiceImpl
2025-01-24 21:18:52.652 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 21:18:52.652 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 21:18:52.653 [main] ERROR ReportServiceImpl - PDF data is empty or corrupted for username: testUser
2025-01-24 21:18:52.657 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 21:18:52.658 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 21:18:52.658 [main] DEBUG ReportServiceImpl - Deleting photo at path: backend/uploads/photos/photo.jpg
2025-01-24 21:18:52.659 [main] INFO  ReportServiceImpl - Successfully deleted photo for report id: 1
2025-01-24 21:18:52.659 [main] TRACE ReportServiceImpl - Exiting deletePhoto method in ReportServiceImpl
2025-01-24 21:18:52.664 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 21:18:52.664 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: unauthorizedUser
2025-01-24 21:18:52.664 [main] ERROR ReportServiceImpl - Unauthorized deletion attempt by username: unauthorizedUser for report id: 1
2025-01-24 21:18:52.669 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 21:18:52.670 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 21:18:52.670 [main] ERROR ReportServiceImpl - Report not found with ID: 1
2025-01-24 21:18:52.675 [main] TRACE ReportServiceImpl - Entering getReportPdf method in ReportServiceImpl
2025-01-24 21:18:52.675 [main] DEBUG ReportServiceImpl - Generating PDF for report id: 1
2025-01-24 21:18:52.676 [main] ERROR ReportServiceImpl - Report with id: 1 not found
2025-01-24 21:18:52.680 [main] TRACE ReportServiceImpl - Entering getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 21:18:52.680 [main] DEBUG ReportServiceImpl - Fetching all reports with filters - Page: 0, Size: 10, SortBy: date, Direction: ASC
2025-01-24 21:18:52.681 [main] INFO  ReportServiceImpl - Total reports found: 1
2025-01-24 21:18:52.681 [main] TRACE ReportServiceImpl - Exiting getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 21:18:52.686 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 21:18:52.686 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 21:18:52.687 [main] INFO  ReportServiceImpl - Report added successfully: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 21:18:52.695 [main] TRACE ReportServiceImpl - Exiting addReport method in ReportServiceImpl
2025-01-24 21:18:52.700 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 21:18:52.700 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 21:18:52.700 [main] ERROR ReportServiceImpl - Report with id: 1 not found for delete photo
2025-01-24 21:18:52.705 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 21:18:52.705 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 21:18:52.706 [main] ERROR ReportServiceImpl - Cached prescription or TR ID number not found for username: testUser
2025-01-24 21:18:52.710 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 21:18:52.711 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 21:18:52.711 [main] ERROR ReportServiceImpl - Report with id: 1 not found for prescription
2025-01-24 21:18:52.716 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 21:18:52.716 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 21:18:52.717 [main] INFO  ReportServiceImpl - Report with id: 1 successfully restored by technician: tech1
2025-01-24 21:18:52.718 [main] TRACE ReportServiceImpl - Exiting restoreReport method in ReportServiceImpl
2025-01-24 21:18:52.723 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 21:18:52.724 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 21:18:52.724 [main] INFO  ReportServiceImpl - Report found: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 21:18:52.724 [main] TRACE ReportServiceImpl - Exiting getReportById method in ReportServiceImpl
2025-01-24 21:18:52.732 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 21:18:52.732 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 21:18:52.733 [main] ERROR ReportServiceImpl - Unauthorized photo upload attempt by user: tech1 on report id: 1
2025-01-24 21:18:52.739 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 21:18:52.739 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 21:18:52.739 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found to restore
2025-01-24 21:18:52.745 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 21:18:52.745 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 21:18:52.746 [main] INFO  ReportServiceImpl - Successfully generated and cached prescription for username: testUser
2025-01-24 21:18:52.746 [main] TRACE ReportServiceImpl - Exiting getPrescription method in ReportServiceImpl
2025-01-24 21:18:52.751 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 21:18:52.752 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 21:18:52.752 [main] INFO  ReportServiceImpl - Report with id: 1 successfully updated by technician: tech1
2025-01-24 21:18:52.752 [main] TRACE ReportServiceImpl - Exiting updateReport method in ReportServiceImpl
2025-01-24 21:18:52.757 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 21:18:52.758 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 21:18:52.758 [main] ERROR ReportServiceImpl - No photo found for report id: 1
2025-01-24 21:18:52.806 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 21:18:52.806 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 21:18:52.806 [main] ERROR ReportServiceImpl - Attempted to add a photo to report with id: 1 which already has a photo
2025-01-24 21:18:52.812 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 21:18:52.813 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 21:18:52.813 [main] ERROR ReportServiceImpl - Report with id 1 not found
2025-01-24 21:18:52.818 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 21:18:52.818 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 21:18:52.819 [main] INFO  ReportServiceImpl - Report with id: 1 successfully deleted by technician: tech1
2025-01-24 21:18:52.820 [main] TRACE ReportServiceImpl - Exiting deleteReport method in ReportServiceImpl
2025-01-24 21:18:52.826 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 21:18:52.826 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech2
2025-01-24 21:18:52.827 [main] ERROR ReportServiceImpl - Unauthorized delete attempt by user: tech2 on report id: 1
2025-01-24 21:18:52.832 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 21:18:52.833 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 21:18:52.833 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found for deletion.
2025-01-24 21:18:52.838 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 21:18:52.838 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 21:18:52.838 [main] ERROR ReportServiceImpl - Report with id 1 not found for add photo
2025-01-24 21:18:52.842 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 21:18:52.843 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 21:18:52.843 [main] ERROR ReportServiceImpl - Unsupported file format: txt for report id: 1
2025-01-24 21:18:52.847 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 21:18:52.847 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 21:18:52.847 [main] ERROR ReportServiceImpl - Report with id: 1 not found for get photo
2025-01-24 21:18:52.851 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 21:18:52.851 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 21:18:52.852 [main] ERROR ReportServiceImpl - No photo to delete for report id: 1
2025-01-24 22:55:25.892 [main] TRACE ReportController - Entering getPrescription method in ReportController class
2025-01-24 22:55:25.898 [main] INFO  ReportController - Fetching prescription for report ID: 1 by user: technician1
2025-01-24 22:55:25.933 [main] TRACE ReportController - Exiting getPrescription method in ReportController class
2025-01-24 22:55:25.985 [main] TRACE ReportController - Entering addReport method in ReportController class
2025-01-24 22:55:25.986 [main] INFO  ReportController - Adding the report by the user: technician1
2025-01-24 22:55:25.987 [main] TRACE ReportController - Exiting addReport method in ReportController class
2025-01-24 22:55:26.001 [main] TRACE ReportController - Entering restoreReport method in ReportController class
2025-01-24 22:55:26.002 [main] INFO  ReportController - Restoring the report with ID: 1 by the user: technician1
2025-01-24 22:55:26.002 [main] TRACE ReportController - Exiting restoreReport method in ReportController class
2025-01-24 22:55:26.005 [main] TRACE ReportController - Entering getReportById method in ReportController class
2025-01-24 22:55:26.005 [main] INFO  ReportController - Retrieving report with ID: 1
2025-01-24 22:55:26.006 [main] TRACE ReportController - Exiting getReportById method in ReportController class
2025-01-24 22:55:26.010 [main] TRACE ReportController - Entering getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 22:55:26.010 [main] INFO  ReportController - Retrieving reports filtered and sorted: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null, deleted=null
2025-01-24 22:55:26.012 [main] TRACE ReportController - Exiting getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 22:55:26.016 [main] TRACE ReportController - Entering updateReport method in ReportController class
2025-01-24 22:55:26.016 [main] INFO  ReportController - Updating the report by the user: technician1
2025-01-24 22:55:26.016 [main] TRACE ReportController - Exiting updateReport method in ReportController class
2025-01-24 22:55:26.020 [main] TRACE ReportController - Entering sendPrescription method in ReportController class
2025-01-24 22:55:26.021 [main] INFO  ReportController - Sending prescription for user: technician1
2025-01-24 22:55:26.021 [main] TRACE ReportController - Exiting sendPrescription method in ReportController class
2025-01-24 22:55:26.025 [main] TRACE ReportController - Entering getAllReportsByTechnician method in ReportController class
2025-01-24 22:55:26.026 [main] INFO  ReportController - Retrieving reports for technician: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, username=technician1, deleted=null
2025-01-24 22:55:26.026 [main] TRACE ReportController - Exiting getAllReportsByTechnician method in ReportController class
2025-01-24 22:55:26.029 [main] TRACE ReportController - Entering deletePhoto method in ReportController class
2025-01-24 22:55:26.029 [main] INFO  ReportController - Deleting photo for report ID: 1 by user: technician1
2025-01-24 22:55:26.029 [main] TRACE ReportController - Exiting deletePhoto method in ReportController class
2025-01-24 22:55:26.032 [main] TRACE ReportController - Entering deleteReport method in ReportController class
2025-01-24 22:55:26.033 [main] INFO  ReportController - Deleting the report with ID: 1 by the user: technician1
2025-01-24 22:55:26.033 [main] TRACE ReportController - Exiting deleteReport method in ReportController class
2025-01-24 22:55:26.133 [main] TRACE ReportController - Entering getReportPdf method in ReportController class
2025-01-24 22:55:26.134 [main] INFO  ReportController - Fetching PDF report for report ID: 1
2025-01-24 22:55:26.135 [main] TRACE ReportController - Exiting getReportPdf method in ReportController class
2025-01-24 22:55:26.140 [main] TRACE ReportController - Entering checkTrIdNumber method in ReportController class
2025-01-24 22:55:26.140 [main] INFO  ReportController - Checking TR ID number: 12345678901 for user: technician1
2025-01-24 22:55:26.141 [main] TRACE ReportController - Exiting checkTrIdNumber method in ReportController class
2025-01-24 22:55:26.145 [main] TRACE ReportController - Entering getPhoto method in ReportController class
2025-01-24 22:55:26.145 [main] INFO  ReportController - Fetching photo for report ID: 1 by user: technician1
2025-01-24 22:55:26.146 [main] TRACE ReportController - Exiting getPhoto method in ReportController class
2025-01-24 22:55:26.150 [main] TRACE ReportController - Entering addPhoto method in ReportController class
2025-01-24 22:55:26.151 [main] INFO  ReportController - Uploading photo for report ID: 1 by user: technician1
2025-01-24 22:55:26.151 [main] TRACE ReportController - Exiting addPhoto method in ReportController class
2025-01-24 22:55:26.744 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 22:55:26.744 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: differentUser
2025-01-24 22:55:26.746 [main] ERROR ReportServiceImpl - Unauthorized access attempt by username: differentUser for report id: 1
2025-01-24 22:55:26.776 [main] TRACE ReportServiceImpl - Entering getReportsByTechnician method in ReportServiceImpl
2025-01-24 22:55:26.776 [main] DEBUG ReportServiceImpl - Fetching reports for technician: technician1 with filters - Page: 0, Size: 10, SortBy: date, Direction: DESC
2025-01-24 22:55:26.779 [main] INFO  ReportServiceImpl - Total reports found for technician technician1: 1
2025-01-24 22:55:26.780 [main] TRACE ReportServiceImpl - Exiting getReportsByTechnician method in ReportServiceImpl
2025-01-24 22:55:26.785 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 22:55:26.785 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 22:55:26.786 [main] ERROR ReportServiceImpl - TR ID number not found in Redis for user: techUser
2025-01-24 22:55:26.791 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 22:55:26.792 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech2
2025-01-24 22:55:26.792 [main] ERROR ReportServiceImpl - Unauthorized update attempt by user: tech2 on report id: 1
2025-01-24 22:55:26.797 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 22:55:26.797 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 22:55:26.798 [main] ERROR ReportServiceImpl - Unauthorized restore attempt by user: tech1 on report id: 1
2025-01-24 22:55:26.893 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 22:55:26.893 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 22:55:26.894 [main] DEBUG ReportServiceImpl - Reading photo from path: backend/uploads/photos/photo.jpg
2025-01-24 22:55:26.894 [main] TRACE ReportServiceImpl - Exiting getPhoto method in ReportServiceImpl
2025-01-24 22:55:26.899 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 22:55:26.899 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 22:55:26.900 [main] ERROR ReportServiceImpl - PDF data is empty or corrupted for username: testUser
2025-01-24 22:55:26.904 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 22:55:26.905 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 22:55:26.905 [main] DEBUG ReportServiceImpl - Deleting photo at path: backend/uploads/photos/photo.jpg
2025-01-24 22:55:26.905 [main] INFO  ReportServiceImpl - Successfully deleted photo for report id: 1
2025-01-24 22:55:26.906 [main] TRACE ReportServiceImpl - Exiting deletePhoto method in ReportServiceImpl
2025-01-24 22:55:26.912 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 22:55:26.913 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: unauthorizedUser
2025-01-24 22:55:26.913 [main] ERROR ReportServiceImpl - Unauthorized deletion attempt by username: unauthorizedUser for report id: 1
2025-01-24 22:55:26.918 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 22:55:26.919 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 22:55:26.919 [main] ERROR ReportServiceImpl - Report not found with ID: 1
2025-01-24 22:55:26.923 [main] TRACE ReportServiceImpl - Entering getReportPdf method in ReportServiceImpl
2025-01-24 22:55:26.923 [main] DEBUG ReportServiceImpl - Generating PDF for report id: 1
2025-01-24 22:55:26.924 [main] ERROR ReportServiceImpl - Report with id: 1 not found
2025-01-24 22:55:26.928 [main] TRACE ReportServiceImpl - Entering getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 22:55:26.928 [main] DEBUG ReportServiceImpl - Fetching all reports with filters - Page: 0, Size: 10, SortBy: date, Direction: ASC
2025-01-24 22:55:26.929 [main] INFO  ReportServiceImpl - Total reports found: 1
2025-01-24 22:55:26.929 [main] TRACE ReportServiceImpl - Exiting getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 22:55:26.934 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 22:55:26.934 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 22:55:26.935 [main] INFO  ReportServiceImpl - Report added successfully: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 22:55:26.942 [main] TRACE ReportServiceImpl - Exiting addReport method in ReportServiceImpl
2025-01-24 22:55:26.947 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 22:55:26.948 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 22:55:26.948 [main] ERROR ReportServiceImpl - Report with id: 1 not found for delete photo
2025-01-24 22:55:26.952 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 22:55:26.953 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 22:55:26.953 [main] ERROR ReportServiceImpl - Cached prescription or TR ID number not found for username: testUser
2025-01-24 22:55:26.957 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 22:55:26.957 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 22:55:26.958 [main] ERROR ReportServiceImpl - Report with id: 1 not found for prescription
2025-01-24 22:55:26.963 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 22:55:26.963 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 22:55:26.963 [main] INFO  ReportServiceImpl - Report with id: 1 successfully restored by technician: tech1
2025-01-24 22:55:26.963 [main] TRACE ReportServiceImpl - Exiting restoreReport method in ReportServiceImpl
2025-01-24 22:55:26.971 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 22:55:26.971 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 22:55:26.972 [main] INFO  ReportServiceImpl - Report found: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 22:55:26.972 [main] TRACE ReportServiceImpl - Exiting getReportById method in ReportServiceImpl
2025-01-24 22:55:26.977 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 22:55:26.977 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 22:55:26.978 [main] ERROR ReportServiceImpl - Unauthorized photo upload attempt by user: tech1 on report id: 1
2025-01-24 22:55:26.983 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 22:55:26.983 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 22:55:26.983 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found to restore
2025-01-24 22:55:26.988 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 22:55:26.989 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 22:55:26.990 [main] INFO  ReportServiceImpl - Successfully generated and cached prescription for username: testUser
2025-01-24 22:55:26.990 [main] TRACE ReportServiceImpl - Exiting getPrescription method in ReportServiceImpl
2025-01-24 22:55:26.996 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 22:55:26.996 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 22:55:26.996 [main] INFO  ReportServiceImpl - Report with id: 1 successfully updated by technician: tech1
2025-01-24 22:55:26.997 [main] TRACE ReportServiceImpl - Exiting updateReport method in ReportServiceImpl
2025-01-24 22:55:27.001 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 22:55:27.002 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 22:55:27.002 [main] ERROR ReportServiceImpl - No photo found for report id: 1
2025-01-24 22:55:27.043 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 22:55:27.043 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 22:55:27.044 [main] ERROR ReportServiceImpl - Attempted to add a photo to report with id: 1 which already has a photo
2025-01-24 22:55:27.048 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 22:55:27.049 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 22:55:27.049 [main] ERROR ReportServiceImpl - Report with id 1 not found
2025-01-24 22:55:27.053 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 22:55:27.054 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 22:55:27.055 [main] INFO  ReportServiceImpl - Report with id: 1 successfully deleted by technician: tech1
2025-01-24 22:55:27.055 [main] TRACE ReportServiceImpl - Exiting deleteReport method in ReportServiceImpl
2025-01-24 22:55:27.059 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 22:55:27.060 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech2
2025-01-24 22:55:27.060 [main] ERROR ReportServiceImpl - Unauthorized delete attempt by user: tech2 on report id: 1
2025-01-24 22:55:27.064 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 22:55:27.064 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 22:55:27.064 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found for deletion.
2025-01-24 22:55:27.070 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 22:55:27.070 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 22:55:27.070 [main] ERROR ReportServiceImpl - Report with id 1 not found for add photo
2025-01-24 22:55:27.075 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 22:55:27.075 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 22:55:27.076 [main] ERROR ReportServiceImpl - Unsupported file format: txt for report id: 1
2025-01-24 22:55:27.079 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 22:55:27.079 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 22:55:27.079 [main] ERROR ReportServiceImpl - Report with id: 1 not found for get photo
2025-01-24 22:55:27.083 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 22:55:27.083 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 22:55:27.084 [main] ERROR ReportServiceImpl - No photo to delete for report id: 1
2025-01-24 22:59:44.343 [main] TRACE ReportController - Entering getPrescription method in ReportController class
2025-01-24 22:59:44.350 [main] INFO  ReportController - Fetching prescription for report ID: 1 by user: technician1
2025-01-24 22:59:44.373 [main] TRACE ReportController - Exiting getPrescription method in ReportController class
2025-01-24 22:59:44.409 [main] TRACE ReportController - Entering addReport method in ReportController class
2025-01-24 22:59:44.409 [main] INFO  ReportController - Adding the report by the user: technician1
2025-01-24 22:59:44.409 [main] TRACE ReportController - Exiting addReport method in ReportController class
2025-01-24 22:59:44.421 [main] TRACE ReportController - Entering restoreReport method in ReportController class
2025-01-24 22:59:44.421 [main] INFO  ReportController - Restoring the report with ID: 1 by the user: technician1
2025-01-24 22:59:44.422 [main] TRACE ReportController - Exiting restoreReport method in ReportController class
2025-01-24 22:59:44.425 [main] TRACE ReportController - Entering getReportById method in ReportController class
2025-01-24 22:59:44.426 [main] INFO  ReportController - Retrieving report with ID: 1
2025-01-24 22:59:44.426 [main] TRACE ReportController - Exiting getReportById method in ReportController class
2025-01-24 22:59:44.430 [main] TRACE ReportController - Entering getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 22:59:44.430 [main] INFO  ReportController - Retrieving reports filtered and sorted: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null, deleted=null
2025-01-24 22:59:44.431 [main] TRACE ReportController - Exiting getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 22:59:44.434 [main] TRACE ReportController - Entering updateReport method in ReportController class
2025-01-24 22:59:44.435 [main] INFO  ReportController - Updating the report by the user: technician1
2025-01-24 22:59:44.435 [main] TRACE ReportController - Exiting updateReport method in ReportController class
2025-01-24 22:59:44.439 [main] TRACE ReportController - Entering sendPrescription method in ReportController class
2025-01-24 22:59:44.439 [main] INFO  ReportController - Sending prescription for user: technician1
2025-01-24 22:59:44.439 [main] TRACE ReportController - Exiting sendPrescription method in ReportController class
2025-01-24 22:59:44.443 [main] TRACE ReportController - Entering getAllReportsByTechnician method in ReportController class
2025-01-24 22:59:44.443 [main] INFO  ReportController - Retrieving reports for technician: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, username=technician1, deleted=null
2025-01-24 22:59:44.444 [main] TRACE ReportController - Exiting getAllReportsByTechnician method in ReportController class
2025-01-24 22:59:44.447 [main] TRACE ReportController - Entering deletePhoto method in ReportController class
2025-01-24 22:59:44.448 [main] INFO  ReportController - Deleting photo for report ID: 1 by user: technician1
2025-01-24 22:59:44.448 [main] TRACE ReportController - Exiting deletePhoto method in ReportController class
2025-01-24 22:59:44.452 [main] TRACE ReportController - Entering deleteReport method in ReportController class
2025-01-24 22:59:44.452 [main] INFO  ReportController - Deleting the report with ID: 1 by the user: technician1
2025-01-24 22:59:44.452 [main] TRACE ReportController - Exiting deleteReport method in ReportController class
2025-01-24 22:59:44.534 [main] TRACE ReportController - Entering getReportPdf method in ReportController class
2025-01-24 22:59:44.534 [main] INFO  ReportController - Fetching PDF report for report ID: 1
2025-01-24 22:59:44.535 [main] TRACE ReportController - Exiting getReportPdf method in ReportController class
2025-01-24 22:59:44.539 [main] TRACE ReportController - Entering checkTrIdNumber method in ReportController class
2025-01-24 22:59:44.539 [main] INFO  ReportController - Checking TR ID number: 12345678901 for user: technician1
2025-01-24 22:59:44.541 [main] TRACE ReportController - Exiting checkTrIdNumber method in ReportController class
2025-01-24 22:59:44.546 [main] TRACE ReportController - Entering getPhoto method in ReportController class
2025-01-24 22:59:44.546 [main] INFO  ReportController - Fetching photo for report ID: 1 by user: technician1
2025-01-24 22:59:44.547 [main] TRACE ReportController - Exiting getPhoto method in ReportController class
2025-01-24 22:59:44.552 [main] TRACE ReportController - Entering addPhoto method in ReportController class
2025-01-24 22:59:44.552 [main] INFO  ReportController - Uploading photo for report ID: 1 by user: technician1
2025-01-24 22:59:44.553 [main] TRACE ReportController - Exiting addPhoto method in ReportController class
2025-01-24 22:59:45.143 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 22:59:45.143 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: differentUser
2025-01-24 22:59:45.145 [main] ERROR ReportServiceImpl - Unauthorized access attempt by username: differentUser for report id: 1
2025-01-24 22:59:45.176 [main] TRACE ReportServiceImpl - Entering getReportsByTechnician method in ReportServiceImpl
2025-01-24 22:59:45.176 [main] DEBUG ReportServiceImpl - Fetching reports for technician: technician1 with filters - Page: 0, Size: 10, SortBy: date, Direction: DESC
2025-01-24 22:59:45.181 [main] INFO  ReportServiceImpl - Total reports found for technician technician1: 1
2025-01-24 22:59:45.181 [main] TRACE ReportServiceImpl - Exiting getReportsByTechnician method in ReportServiceImpl
2025-01-24 22:59:45.187 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 22:59:45.187 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 22:59:45.188 [main] ERROR ReportServiceImpl - TR ID number not found in Redis for user: techUser
2025-01-24 22:59:45.194 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 22:59:45.195 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech2
2025-01-24 22:59:45.195 [main] ERROR ReportServiceImpl - Unauthorized update attempt by user: tech2 on report id: 1
2025-01-24 22:59:45.199 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 22:59:45.200 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 22:59:45.200 [main] ERROR ReportServiceImpl - Unauthorized restore attempt by user: tech1 on report id: 1
2025-01-24 22:59:45.295 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 22:59:45.295 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 22:59:45.295 [main] DEBUG ReportServiceImpl - Reading photo from path: backend/uploads/photos/photo.jpg
2025-01-24 22:59:45.295 [main] TRACE ReportServiceImpl - Exiting getPhoto method in ReportServiceImpl
2025-01-24 22:59:45.301 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 22:59:45.301 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 22:59:45.301 [main] ERROR ReportServiceImpl - PDF data is empty or corrupted for username: testUser
2025-01-24 22:59:45.306 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 22:59:45.306 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 22:59:45.306 [main] DEBUG ReportServiceImpl - Deleting photo at path: backend/uploads/photos/photo.jpg
2025-01-24 22:59:45.307 [main] INFO  ReportServiceImpl - Successfully deleted photo for report id: 1
2025-01-24 22:59:45.307 [main] TRACE ReportServiceImpl - Exiting deletePhoto method in ReportServiceImpl
2025-01-24 22:59:45.313 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 22:59:45.313 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: unauthorizedUser
2025-01-24 22:59:45.313 [main] ERROR ReportServiceImpl - Unauthorized deletion attempt by username: unauthorizedUser for report id: 1
2025-01-24 22:59:45.317 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 22:59:45.318 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 22:59:45.318 [main] ERROR ReportServiceImpl - Report not found with ID: 1
2025-01-24 22:59:45.321 [main] TRACE ReportServiceImpl - Entering getReportPdf method in ReportServiceImpl
2025-01-24 22:59:45.322 [main] DEBUG ReportServiceImpl - Generating PDF for report id: 1
2025-01-24 22:59:45.322 [main] ERROR ReportServiceImpl - Report with id: 1 not found
2025-01-24 22:59:45.326 [main] TRACE ReportServiceImpl - Entering getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 22:59:45.326 [main] DEBUG ReportServiceImpl - Fetching all reports with filters - Page: 0, Size: 10, SortBy: date, Direction: ASC
2025-01-24 22:59:45.327 [main] INFO  ReportServiceImpl - Total reports found: 1
2025-01-24 22:59:45.327 [main] TRACE ReportServiceImpl - Exiting getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 22:59:45.331 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 22:59:45.331 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 22:59:45.331 [main] INFO  ReportServiceImpl - Report added successfully: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 22:59:45.339 [main] TRACE ReportServiceImpl - Exiting addReport method in ReportServiceImpl
2025-01-24 22:59:45.343 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 22:59:45.343 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 22:59:45.343 [main] ERROR ReportServiceImpl - Report with id: 1 not found for delete photo
2025-01-24 22:59:45.347 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 22:59:45.347 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 22:59:45.348 [main] ERROR ReportServiceImpl - Cached prescription or TR ID number not found for username: testUser
2025-01-24 22:59:45.353 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 22:59:45.353 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 22:59:45.354 [main] ERROR ReportServiceImpl - Report with id: 1 not found for prescription
2025-01-24 22:59:45.358 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 22:59:45.358 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 22:59:45.358 [main] INFO  ReportServiceImpl - Report with id: 1 successfully restored by technician: tech1
2025-01-24 22:59:45.358 [main] TRACE ReportServiceImpl - Exiting restoreReport method in ReportServiceImpl
2025-01-24 22:59:45.363 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 22:59:45.363 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 22:59:45.363 [main] INFO  ReportServiceImpl - Report found: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 22:59:45.364 [main] TRACE ReportServiceImpl - Exiting getReportById method in ReportServiceImpl
2025-01-24 22:59:45.369 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 22:59:45.369 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 22:59:45.370 [main] ERROR ReportServiceImpl - Unauthorized photo upload attempt by user: tech1 on report id: 1
2025-01-24 22:59:45.374 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 22:59:45.374 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 22:59:45.374 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found to restore
2025-01-24 22:59:45.381 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 22:59:45.381 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 22:59:45.382 [main] INFO  ReportServiceImpl - Successfully generated and cached prescription for username: testUser
2025-01-24 22:59:45.382 [main] TRACE ReportServiceImpl - Exiting getPrescription method in ReportServiceImpl
2025-01-24 22:59:45.386 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 22:59:45.387 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 22:59:45.387 [main] INFO  ReportServiceImpl - Report with id: 1 successfully updated by technician: tech1
2025-01-24 22:59:45.387 [main] TRACE ReportServiceImpl - Exiting updateReport method in ReportServiceImpl
2025-01-24 22:59:45.391 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 22:59:45.391 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 22:59:45.393 [main] ERROR ReportServiceImpl - No photo found for report id: 1
2025-01-24 22:59:45.431 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 22:59:45.431 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 22:59:45.431 [main] ERROR ReportServiceImpl - Attempted to add a photo to report with id: 1 which already has a photo
2025-01-24 22:59:45.437 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 22:59:45.437 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 22:59:45.437 [main] ERROR ReportServiceImpl - Report with id 1 not found
2025-01-24 22:59:45.441 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 22:59:45.442 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 22:59:45.442 [main] INFO  ReportServiceImpl - Report with id: 1 successfully deleted by technician: tech1
2025-01-24 22:59:45.442 [main] TRACE ReportServiceImpl - Exiting deleteReport method in ReportServiceImpl
2025-01-24 22:59:45.447 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 22:59:45.447 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech2
2025-01-24 22:59:45.448 [main] ERROR ReportServiceImpl - Unauthorized delete attempt by user: tech2 on report id: 1
2025-01-24 22:59:45.451 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 22:59:45.452 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 22:59:45.452 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found for deletion.
2025-01-24 22:59:45.456 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 22:59:45.456 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 22:59:45.457 [main] ERROR ReportServiceImpl - Report with id 1 not found for add photo
2025-01-24 22:59:45.462 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 22:59:45.462 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 22:59:45.464 [main] ERROR ReportServiceImpl - Unsupported file format: txt for report id: 1
2025-01-24 22:59:45.468 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 22:59:45.468 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 22:59:45.469 [main] ERROR ReportServiceImpl - Report with id: 1 not found for get photo
2025-01-24 22:59:45.473 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 22:59:45.473 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 22:59:45.473 [main] ERROR ReportServiceImpl - No photo to delete for report id: 1
2025-01-24 23:02:04.431 [main] TRACE ReportController - Entering getPrescription method in ReportController class
2025-01-24 23:02:04.436 [main] INFO  ReportController - Fetching prescription for report ID: 1 by user: technician1
2025-01-24 23:02:04.463 [main] TRACE ReportController - Exiting getPrescription method in ReportController class
2025-01-24 23:02:04.506 [main] TRACE ReportController - Entering addReport method in ReportController class
2025-01-24 23:02:04.506 [main] INFO  ReportController - Adding the report by the user: technician1
2025-01-24 23:02:04.507 [main] TRACE ReportController - Exiting addReport method in ReportController class
2025-01-24 23:02:04.521 [main] TRACE ReportController - Entering restoreReport method in ReportController class
2025-01-24 23:02:04.521 [main] INFO  ReportController - Restoring the report with ID: 1 by the user: technician1
2025-01-24 23:02:04.521 [main] TRACE ReportController - Exiting restoreReport method in ReportController class
2025-01-24 23:02:04.525 [main] TRACE ReportController - Entering getReportById method in ReportController class
2025-01-24 23:02:04.525 [main] INFO  ReportController - Retrieving report with ID: 1
2025-01-24 23:02:04.525 [main] TRACE ReportController - Exiting getReportById method in ReportController class
2025-01-24 23:02:04.529 [main] TRACE ReportController - Entering getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 23:02:04.529 [main] INFO  ReportController - Retrieving reports filtered and sorted: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null, deleted=null
2025-01-24 23:02:04.530 [main] TRACE ReportController - Exiting getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 23:02:04.533 [main] TRACE ReportController - Entering updateReport method in ReportController class
2025-01-24 23:02:04.533 [main] INFO  ReportController - Updating the report by the user: technician1
2025-01-24 23:02:04.533 [main] TRACE ReportController - Exiting updateReport method in ReportController class
2025-01-24 23:02:04.536 [main] TRACE ReportController - Entering sendPrescription method in ReportController class
2025-01-24 23:02:04.536 [main] INFO  ReportController - Sending prescription for user: technician1
2025-01-24 23:02:04.536 [main] TRACE ReportController - Exiting sendPrescription method in ReportController class
2025-01-24 23:02:04.540 [main] TRACE ReportController - Entering getAllReportsByTechnician method in ReportController class
2025-01-24 23:02:04.540 [main] INFO  ReportController - Retrieving reports for technician: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, username=technician1, deleted=null
2025-01-24 23:02:04.541 [main] TRACE ReportController - Exiting getAllReportsByTechnician method in ReportController class
2025-01-24 23:02:04.543 [main] TRACE ReportController - Entering deletePhoto method in ReportController class
2025-01-24 23:02:04.543 [main] INFO  ReportController - Deleting photo for report ID: 1 by user: technician1
2025-01-24 23:02:04.544 [main] TRACE ReportController - Exiting deletePhoto method in ReportController class
2025-01-24 23:02:04.546 [main] TRACE ReportController - Entering deleteReport method in ReportController class
2025-01-24 23:02:04.546 [main] INFO  ReportController - Deleting the report with ID: 1 by the user: technician1
2025-01-24 23:02:04.546 [main] TRACE ReportController - Exiting deleteReport method in ReportController class
2025-01-24 23:02:04.631 [main] TRACE ReportController - Entering getReportPdf method in ReportController class
2025-01-24 23:02:04.631 [main] INFO  ReportController - Fetching PDF report for report ID: 1
2025-01-24 23:02:04.632 [main] TRACE ReportController - Exiting getReportPdf method in ReportController class
2025-01-24 23:02:04.636 [main] TRACE ReportController - Entering checkTrIdNumber method in ReportController class
2025-01-24 23:02:04.636 [main] INFO  ReportController - Checking TR ID number: 12345678901 for user: technician1
2025-01-24 23:02:04.637 [main] TRACE ReportController - Exiting checkTrIdNumber method in ReportController class
2025-01-24 23:02:04.642 [main] TRACE ReportController - Entering getPhoto method in ReportController class
2025-01-24 23:02:04.642 [main] INFO  ReportController - Fetching photo for report ID: 1 by user: technician1
2025-01-24 23:02:04.643 [main] TRACE ReportController - Exiting getPhoto method in ReportController class
2025-01-24 23:02:04.648 [main] TRACE ReportController - Entering addPhoto method in ReportController class
2025-01-24 23:02:04.648 [main] INFO  ReportController - Uploading photo for report ID: 1 by user: technician1
2025-01-24 23:02:04.648 [main] TRACE ReportController - Exiting addPhoto method in ReportController class
2025-01-24 23:02:05.254 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:02:05.254 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: differentUser
2025-01-24 23:02:05.256 [main] ERROR ReportServiceImpl - Unauthorized access attempt by username: differentUser for report id: 1
2025-01-24 23:02:05.278 [main] TRACE ReportServiceImpl - Entering getReportsByTechnician method in ReportServiceImpl
2025-01-24 23:02:05.278 [main] DEBUG ReportServiceImpl - Fetching reports for technician: technician1 with filters - Page: 0, Size: 10, SortBy: date, Direction: DESC
2025-01-24 23:02:05.282 [main] INFO  ReportServiceImpl - Total reports found for technician technician1: 1
2025-01-24 23:02:05.282 [main] TRACE ReportServiceImpl - Exiting getReportsByTechnician method in ReportServiceImpl
2025-01-24 23:02:05.288 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 23:02:05.288 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 23:02:05.289 [main] ERROR ReportServiceImpl - TR ID number not found in Redis for user: techUser
2025-01-24 23:02:05.295 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:02:05.296 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech2
2025-01-24 23:02:05.296 [main] ERROR ReportServiceImpl - Unauthorized update attempt by user: tech2 on report id: 1
2025-01-24 23:02:05.301 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:02:05.301 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:02:05.302 [main] ERROR ReportServiceImpl - Unauthorized restore attempt by user: tech1 on report id: 1
2025-01-24 23:02:05.394 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:02:05.395 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:02:05.395 [main] DEBUG ReportServiceImpl - Reading photo from path: backend/uploads/photos/photo.jpg
2025-01-24 23:02:05.395 [main] TRACE ReportServiceImpl - Exiting getPhoto method in ReportServiceImpl
2025-01-24 23:02:05.400 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 23:02:05.401 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 23:02:05.401 [main] ERROR ReportServiceImpl - PDF data is empty or corrupted for username: testUser
2025-01-24 23:02:05.408 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:02:05.408 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:02:05.408 [main] DEBUG ReportServiceImpl - Deleting photo at path: backend/uploads/photos/photo.jpg
2025-01-24 23:02:05.409 [main] INFO  ReportServiceImpl - Successfully deleted photo for report id: 1
2025-01-24 23:02:05.409 [main] TRACE ReportServiceImpl - Exiting deletePhoto method in ReportServiceImpl
2025-01-24 23:02:05.414 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:02:05.415 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: unauthorizedUser
2025-01-24 23:02:05.415 [main] ERROR ReportServiceImpl - Unauthorized deletion attempt by username: unauthorizedUser for report id: 1
2025-01-24 23:02:05.419 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 23:02:05.420 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 23:02:05.420 [main] ERROR ReportServiceImpl - Report not found with ID: 1
2025-01-24 23:02:05.425 [main] TRACE ReportServiceImpl - Entering getReportPdf method in ReportServiceImpl
2025-01-24 23:02:05.425 [main] DEBUG ReportServiceImpl - Generating PDF for report id: 1
2025-01-24 23:02:05.426 [main] ERROR ReportServiceImpl - Report with id: 1 not found
2025-01-24 23:02:05.429 [main] TRACE ReportServiceImpl - Entering getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 23:02:05.430 [main] DEBUG ReportServiceImpl - Fetching all reports with filters - Page: 0, Size: 10, SortBy: date, Direction: ASC
2025-01-24 23:02:05.430 [main] INFO  ReportServiceImpl - Total reports found: 1
2025-01-24 23:02:05.430 [main] TRACE ReportServiceImpl - Exiting getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 23:02:05.435 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 23:02:05.435 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 23:02:05.436 [main] INFO  ReportServiceImpl - Report added successfully: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 23:02:05.443 [main] TRACE ReportServiceImpl - Exiting addReport method in ReportServiceImpl
2025-01-24 23:02:05.447 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:02:05.448 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:02:05.448 [main] ERROR ReportServiceImpl - Report with id: 1 not found for delete photo
2025-01-24 23:02:05.452 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 23:02:05.452 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 23:02:05.453 [main] ERROR ReportServiceImpl - Cached prescription or TR ID number not found for username: testUser
2025-01-24 23:02:05.458 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 23:02:05.458 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 23:02:05.458 [main] ERROR ReportServiceImpl - Report with id: 1 not found for prescription
2025-01-24 23:02:05.462 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:02:05.462 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:02:05.463 [main] INFO  ReportServiceImpl - Report with id: 1 successfully restored by technician: tech1
2025-01-24 23:02:05.463 [main] TRACE ReportServiceImpl - Exiting restoreReport method in ReportServiceImpl
2025-01-24 23:02:05.469 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 23:02:05.469 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 23:02:05.469 [main] INFO  ReportServiceImpl - Report found: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 23:02:05.469 [main] TRACE ReportServiceImpl - Exiting getReportById method in ReportServiceImpl
2025-01-24 23:02:05.475 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:02:05.475 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:02:05.476 [main] ERROR ReportServiceImpl - Unauthorized photo upload attempt by user: tech1 on report id: 1
2025-01-24 23:02:05.481 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:02:05.481 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:02:05.481 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found to restore
2025-01-24 23:02:05.487 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 23:02:05.488 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 23:02:05.489 [main] INFO  ReportServiceImpl - Successfully generated and cached prescription for username: testUser
2025-01-24 23:02:05.489 [main] TRACE ReportServiceImpl - Exiting getPrescription method in ReportServiceImpl
2025-01-24 23:02:05.494 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:02:05.495 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 23:02:05.495 [main] INFO  ReportServiceImpl - Report with id: 1 successfully updated by technician: tech1
2025-01-24 23:02:05.496 [main] TRACE ReportServiceImpl - Exiting updateReport method in ReportServiceImpl
2025-01-24 23:02:05.501 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:02:05.501 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:02:05.501 [main] ERROR ReportServiceImpl - No photo found for report id: 1
2025-01-24 23:02:05.562 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:02:05.562 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:02:05.564 [main] ERROR ReportServiceImpl - Attempted to add a photo to report with id: 1 which already has a photo
2025-01-24 23:02:05.569 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:02:05.569 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 23:02:05.569 [main] ERROR ReportServiceImpl - Report with id 1 not found
2025-01-24 23:02:05.574 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:02:05.575 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 23:02:05.579 [main] INFO  ReportServiceImpl - Report with id: 1 successfully deleted by technician: tech1
2025-01-24 23:02:05.580 [main] TRACE ReportServiceImpl - Exiting deleteReport method in ReportServiceImpl
2025-01-24 23:02:05.587 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:02:05.587 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech2
2025-01-24 23:02:05.588 [main] ERROR ReportServiceImpl - Unauthorized delete attempt by user: tech2 on report id: 1
2025-01-24 23:02:05.592 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:02:05.592 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 23:02:05.592 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found for deletion.
2025-01-24 23:02:05.595 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:02:05.596 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:02:05.596 [main] ERROR ReportServiceImpl - Report with id 1 not found for add photo
2025-01-24 23:02:05.600 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:02:05.600 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:02:05.600 [main] ERROR ReportServiceImpl - Unsupported file format: txt for report id: 1
2025-01-24 23:02:05.603 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:02:05.603 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:02:05.603 [main] ERROR ReportServiceImpl - Report with id: 1 not found for get photo
2025-01-24 23:02:05.607 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:02:05.607 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:02:05.607 [main] ERROR ReportServiceImpl - No photo to delete for report id: 1
2025-01-24 23:33:26.501 [main] TRACE ReportController - Entering getPrescription method in ReportController class
2025-01-24 23:33:26.509 [main] INFO  ReportController - Fetching prescription for report ID: 1 by user: technician1
2025-01-24 23:33:26.537 [main] TRACE ReportController - Exiting getPrescription method in ReportController class
2025-01-24 23:33:26.579 [main] TRACE ReportController - Entering addReport method in ReportController class
2025-01-24 23:33:26.579 [main] INFO  ReportController - Adding the report by the user: technician1
2025-01-24 23:33:26.579 [main] TRACE ReportController - Exiting addReport method in ReportController class
2025-01-24 23:33:26.594 [main] TRACE ReportController - Entering restoreReport method in ReportController class
2025-01-24 23:33:26.594 [main] INFO  ReportController - Restoring the report with ID: 1 by the user: technician1
2025-01-24 23:33:26.594 [main] TRACE ReportController - Exiting restoreReport method in ReportController class
2025-01-24 23:33:26.598 [main] TRACE ReportController - Entering getReportById method in ReportController class
2025-01-24 23:33:26.599 [main] INFO  ReportController - Retrieving report with ID: 1
2025-01-24 23:33:26.599 [main] TRACE ReportController - Exiting getReportById method in ReportController class
2025-01-24 23:33:26.604 [main] TRACE ReportController - Entering getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 23:33:26.604 [main] INFO  ReportController - Retrieving reports filtered and sorted: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null, deleted=null
2025-01-24 23:33:26.604 [main] TRACE ReportController - Exiting getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 23:33:26.610 [main] TRACE ReportController - Entering updateReport method in ReportController class
2025-01-24 23:33:26.610 [main] INFO  ReportController - Updating the report by the user: technician1
2025-01-24 23:33:26.610 [main] TRACE ReportController - Exiting updateReport method in ReportController class
2025-01-24 23:33:26.614 [main] TRACE ReportController - Entering sendPrescription method in ReportController class
2025-01-24 23:33:26.614 [main] INFO  ReportController - Sending prescription for user: technician1
2025-01-24 23:33:26.615 [main] TRACE ReportController - Exiting sendPrescription method in ReportController class
2025-01-24 23:33:26.618 [main] TRACE ReportController - Entering getAllReportsByTechnician method in ReportController class
2025-01-24 23:33:26.618 [main] INFO  ReportController - Retrieving reports for technician: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, username=technician1, deleted=null
2025-01-24 23:33:26.619 [main] TRACE ReportController - Exiting getAllReportsByTechnician method in ReportController class
2025-01-24 23:33:26.622 [main] TRACE ReportController - Entering deletePhoto method in ReportController class
2025-01-24 23:33:26.622 [main] INFO  ReportController - Deleting photo for report ID: 1 by user: technician1
2025-01-24 23:33:26.623 [main] TRACE ReportController - Exiting deletePhoto method in ReportController class
2025-01-24 23:33:26.625 [main] TRACE ReportController - Entering deleteReport method in ReportController class
2025-01-24 23:33:26.626 [main] INFO  ReportController - Deleting the report with ID: 1 by the user: technician1
2025-01-24 23:33:26.626 [main] TRACE ReportController - Exiting deleteReport method in ReportController class
2025-01-24 23:33:26.717 [main] TRACE ReportController - Entering getReportPdf method in ReportController class
2025-01-24 23:33:26.717 [main] INFO  ReportController - Fetching PDF report for report ID: 1
2025-01-24 23:33:26.718 [main] TRACE ReportController - Exiting getReportPdf method in ReportController class
2025-01-24 23:33:26.722 [main] TRACE ReportController - Entering checkTrIdNumber method in ReportController class
2025-01-24 23:33:26.722 [main] INFO  ReportController - Checking TR ID number: 12345678901 for user: technician1
2025-01-24 23:33:26.723 [main] TRACE ReportController - Exiting checkTrIdNumber method in ReportController class
2025-01-24 23:33:26.728 [main] TRACE ReportController - Entering getPhoto method in ReportController class
2025-01-24 23:33:26.728 [main] INFO  ReportController - Fetching photo for report ID: 1 by user: technician1
2025-01-24 23:33:26.728 [main] TRACE ReportController - Exiting getPhoto method in ReportController class
2025-01-24 23:33:26.734 [main] TRACE ReportController - Entering addPhoto method in ReportController class
2025-01-24 23:33:26.734 [main] INFO  ReportController - Uploading photo for report ID: 1 by user: technician1
2025-01-24 23:33:26.735 [main] TRACE ReportController - Exiting addPhoto method in ReportController class
2025-01-24 23:33:27.351 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:33:27.351 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: differentUser
2025-01-24 23:33:27.353 [main] ERROR ReportServiceImpl - Unauthorized access attempt by username: differentUser for report id: 1
2025-01-24 23:33:27.375 [main] TRACE ReportServiceImpl - Entering getReportsByTechnician method in ReportServiceImpl
2025-01-24 23:33:27.375 [main] DEBUG ReportServiceImpl - Fetching reports for technician: technician1 with filters - Page: 0, Size: 10, SortBy: date, Direction: DESC
2025-01-24 23:33:27.379 [main] INFO  ReportServiceImpl - Total reports found for technician technician1: 1
2025-01-24 23:33:27.379 [main] TRACE ReportServiceImpl - Exiting getReportsByTechnician method in ReportServiceImpl
2025-01-24 23:33:27.386 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 23:33:27.386 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 23:33:27.387 [main] ERROR ReportServiceImpl - TR ID number not found in Redis for user: techUser
2025-01-24 23:33:27.392 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:33:27.393 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech2
2025-01-24 23:33:27.393 [main] ERROR ReportServiceImpl - Unauthorized update attempt by user: tech2 on report id: 1
2025-01-24 23:33:27.398 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:33:27.398 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:33:27.399 [main] ERROR ReportServiceImpl - Unauthorized restore attempt by user: tech1 on report id: 1
2025-01-24 23:33:27.494 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:33:27.494 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:33:27.494 [main] DEBUG ReportServiceImpl - Reading photo from path: backend/uploads/photos/photo.jpg
2025-01-24 23:33:27.494 [main] TRACE ReportServiceImpl - Exiting getPhoto method in ReportServiceImpl
2025-01-24 23:33:27.500 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 23:33:27.500 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 23:33:27.501 [main] ERROR ReportServiceImpl - PDF data is empty or corrupted for username: testUser
2025-01-24 23:33:27.506 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:33:27.506 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:33:27.507 [main] DEBUG ReportServiceImpl - Deleting photo at path: backend/uploads/photos/photo.jpg
2025-01-24 23:33:27.507 [main] INFO  ReportServiceImpl - Successfully deleted photo for report id: 1
2025-01-24 23:33:27.507 [main] TRACE ReportServiceImpl - Exiting deletePhoto method in ReportServiceImpl
2025-01-24 23:33:27.513 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:33:27.513 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: unauthorizedUser
2025-01-24 23:33:27.513 [main] ERROR ReportServiceImpl - Unauthorized deletion attempt by username: unauthorizedUser for report id: 1
2025-01-24 23:33:27.518 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 23:33:27.518 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 23:33:27.519 [main] ERROR ReportServiceImpl - Report not found with ID: 1
2025-01-24 23:33:27.523 [main] TRACE ReportServiceImpl - Entering getReportPdf method in ReportServiceImpl
2025-01-24 23:33:27.523 [main] DEBUG ReportServiceImpl - Generating PDF for report id: 1
2025-01-24 23:33:27.524 [main] ERROR ReportServiceImpl - Report with id: 1 not found
2025-01-24 23:33:27.528 [main] TRACE ReportServiceImpl - Entering getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 23:33:27.528 [main] DEBUG ReportServiceImpl - Fetching all reports with filters - Page: 0, Size: 10, SortBy: date, Direction: ASC
2025-01-24 23:33:27.529 [main] INFO  ReportServiceImpl - Total reports found: 1
2025-01-24 23:33:27.529 [main] TRACE ReportServiceImpl - Exiting getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 23:33:27.533 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 23:33:27.533 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 23:33:27.534 [main] INFO  ReportServiceImpl - Report added successfully: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 23:33:27.541 [main] TRACE ReportServiceImpl - Exiting addReport method in ReportServiceImpl
2025-01-24 23:33:27.545 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:33:27.546 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:33:27.546 [main] ERROR ReportServiceImpl - Report with id: 1 not found for delete photo
2025-01-24 23:33:27.550 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 23:33:27.550 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 23:33:27.551 [main] ERROR ReportServiceImpl - Cached prescription or TR ID number not found for username: testUser
2025-01-24 23:33:27.555 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 23:33:27.555 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 23:33:27.556 [main] ERROR ReportServiceImpl - Report with id: 1 not found for prescription
2025-01-24 23:33:27.560 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:33:27.561 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:33:27.561 [main] INFO  ReportServiceImpl - Report with id: 1 successfully restored by technician: tech1
2025-01-24 23:33:27.561 [main] TRACE ReportServiceImpl - Exiting restoreReport method in ReportServiceImpl
2025-01-24 23:33:27.568 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 23:33:27.568 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 23:33:27.569 [main] INFO  ReportServiceImpl - Report found: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 23:33:27.569 [main] TRACE ReportServiceImpl - Exiting getReportById method in ReportServiceImpl
2025-01-24 23:33:27.575 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:33:27.575 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:33:27.576 [main] ERROR ReportServiceImpl - Unauthorized photo upload attempt by user: tech1 on report id: 1
2025-01-24 23:33:27.581 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:33:27.581 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:33:27.581 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found to restore
2025-01-24 23:33:27.587 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 23:33:27.588 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 23:33:27.589 [main] INFO  ReportServiceImpl - Successfully generated and cached prescription for username: testUser
2025-01-24 23:33:27.589 [main] TRACE ReportServiceImpl - Exiting getPrescription method in ReportServiceImpl
2025-01-24 23:33:27.594 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:33:27.595 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 23:33:27.595 [main] INFO  ReportServiceImpl - Report with id: 1 successfully updated by technician: tech1
2025-01-24 23:33:27.595 [main] TRACE ReportServiceImpl - Exiting updateReport method in ReportServiceImpl
2025-01-24 23:33:27.600 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:33:27.600 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:33:27.600 [main] ERROR ReportServiceImpl - No photo found for report id: 1
2025-01-24 23:33:27.647 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:33:27.647 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:33:27.647 [main] ERROR ReportServiceImpl - Attempted to add a photo to report with id: 1 which already has a photo
2025-01-24 23:33:27.652 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:33:27.652 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 23:33:27.653 [main] ERROR ReportServiceImpl - Report with id 1 not found
2025-01-24 23:33:27.658 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:33:27.658 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 23:33:27.659 [main] INFO  ReportServiceImpl - Report with id: 1 successfully deleted by technician: tech1
2025-01-24 23:33:27.659 [main] TRACE ReportServiceImpl - Exiting deleteReport method in ReportServiceImpl
2025-01-24 23:33:27.665 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:33:27.665 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech2
2025-01-24 23:33:27.666 [main] ERROR ReportServiceImpl - Unauthorized delete attempt by user: tech2 on report id: 1
2025-01-24 23:33:27.670 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:33:27.670 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 23:33:27.670 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found for deletion.
2025-01-24 23:33:27.674 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:33:27.674 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:33:27.675 [main] ERROR ReportServiceImpl - Report with id 1 not found for add photo
2025-01-24 23:33:27.679 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:33:27.679 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:33:27.679 [main] ERROR ReportServiceImpl - Unsupported file format: txt for report id: 1
2025-01-24 23:33:27.682 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:33:27.683 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:33:27.683 [main] ERROR ReportServiceImpl - Report with id: 1 not found for get photo
2025-01-24 23:33:27.686 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:33:27.686 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:33:27.687 [main] ERROR ReportServiceImpl - No photo to delete for report id: 1
2025-01-24 23:57:05.505 [main] TRACE ReportController - Entering getPrescription method in ReportController class
2025-01-24 23:57:05.511 [main] INFO  ReportController - Fetching prescription for report ID: 1 by user: technician1
2025-01-24 23:57:05.536 [main] TRACE ReportController - Exiting getPrescription method in ReportController class
2025-01-24 23:57:05.580 [main] TRACE ReportController - Entering addReport method in ReportController class
2025-01-24 23:57:05.580 [main] INFO  ReportController - Adding the report by the user: technician1
2025-01-24 23:57:05.581 [main] TRACE ReportController - Exiting addReport method in ReportController class
2025-01-24 23:57:05.592 [main] TRACE ReportController - Entering restoreReport method in ReportController class
2025-01-24 23:57:05.593 [main] INFO  ReportController - Restoring the report with ID: 1 by the user: technician1
2025-01-24 23:57:05.593 [main] TRACE ReportController - Exiting restoreReport method in ReportController class
2025-01-24 23:57:05.596 [main] TRACE ReportController - Entering getReportById method in ReportController class
2025-01-24 23:57:05.596 [main] INFO  ReportController - Retrieving report with ID: 1
2025-01-24 23:57:05.597 [main] TRACE ReportController - Exiting getReportById method in ReportController class
2025-01-24 23:57:05.600 [main] TRACE ReportController - Entering getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 23:57:05.601 [main] INFO  ReportController - Retrieving reports filtered and sorted: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null, deleted=null
2025-01-24 23:57:05.601 [main] TRACE ReportController - Exiting getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 23:57:05.605 [main] TRACE ReportController - Entering updateReport method in ReportController class
2025-01-24 23:57:05.605 [main] INFO  ReportController - Updating the report by the user: technician1
2025-01-24 23:57:05.606 [main] TRACE ReportController - Exiting updateReport method in ReportController class
2025-01-24 23:57:05.609 [main] TRACE ReportController - Entering sendPrescription method in ReportController class
2025-01-24 23:57:05.609 [main] INFO  ReportController - Sending prescription for user: technician1
2025-01-24 23:57:05.609 [main] TRACE ReportController - Exiting sendPrescription method in ReportController class
2025-01-24 23:57:05.612 [main] TRACE ReportController - Entering getAllReportsByTechnician method in ReportController class
2025-01-24 23:57:05.613 [main] INFO  ReportController - Retrieving reports for technician: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, username=technician1, deleted=null
2025-01-24 23:57:05.613 [main] TRACE ReportController - Exiting getAllReportsByTechnician method in ReportController class
2025-01-24 23:57:05.616 [main] TRACE ReportController - Entering deletePhoto method in ReportController class
2025-01-24 23:57:05.616 [main] INFO  ReportController - Deleting photo for report ID: 1 by user: technician1
2025-01-24 23:57:05.616 [main] TRACE ReportController - Exiting deletePhoto method in ReportController class
2025-01-24 23:57:05.619 [main] TRACE ReportController - Entering deleteReport method in ReportController class
2025-01-24 23:57:05.619 [main] INFO  ReportController - Deleting the report with ID: 1 by the user: technician1
2025-01-24 23:57:05.620 [main] TRACE ReportController - Exiting deleteReport method in ReportController class
2025-01-24 23:57:05.705 [main] TRACE ReportController - Entering getReportPdf method in ReportController class
2025-01-24 23:57:05.705 [main] INFO  ReportController - Fetching PDF report for report ID: 1
2025-01-24 23:57:05.706 [main] TRACE ReportController - Exiting getReportPdf method in ReportController class
2025-01-24 23:57:05.710 [main] TRACE ReportController - Entering checkTrIdNumber method in ReportController class
2025-01-24 23:57:05.710 [main] INFO  ReportController - Checking TR ID number: 12345678901 for user: technician1
2025-01-24 23:57:05.710 [main] TRACE ReportController - Exiting checkTrIdNumber method in ReportController class
2025-01-24 23:57:05.715 [main] TRACE ReportController - Entering getPhoto method in ReportController class
2025-01-24 23:57:05.715 [main] INFO  ReportController - Fetching photo for report ID: 1 by user: technician1
2025-01-24 23:57:05.715 [main] TRACE ReportController - Exiting getPhoto method in ReportController class
2025-01-24 23:57:05.721 [main] TRACE ReportController - Entering addPhoto method in ReportController class
2025-01-24 23:57:05.721 [main] INFO  ReportController - Uploading photo for report ID: 1 by user: technician1
2025-01-24 23:57:05.721 [main] TRACE ReportController - Exiting addPhoto method in ReportController class
2025-01-24 23:57:06.316 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:57:06.316 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: differentUser
2025-01-24 23:57:06.318 [main] ERROR ReportServiceImpl - Unauthorized access attempt by username: differentUser for report id: 1
2025-01-24 23:57:06.335 [main] TRACE ReportServiceImpl - Entering getReportsByTechnician method in ReportServiceImpl
2025-01-24 23:57:06.336 [main] DEBUG ReportServiceImpl - Fetching reports for technician: technician1 with filters - Page: 0, Size: 10, SortBy: date, Direction: DESC
2025-01-24 23:57:06.340 [main] INFO  ReportServiceImpl - Total reports found for technician technician1: 1
2025-01-24 23:57:06.340 [main] TRACE ReportServiceImpl - Exiting getReportsByTechnician method in ReportServiceImpl
2025-01-24 23:57:06.347 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 23:57:06.347 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 23:57:06.347 [main] ERROR ReportServiceImpl - TR ID number not found in Redis for user: techUser
2025-01-24 23:57:06.353 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:57:06.354 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech2
2025-01-24 23:57:06.354 [main] ERROR ReportServiceImpl - Unauthorized update attempt by user: tech2 on report id: 1
2025-01-24 23:57:06.358 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:57:06.358 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:57:06.359 [main] ERROR ReportServiceImpl - Unauthorized restore attempt by user: tech1 on report id: 1
2025-01-24 23:57:06.450 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:57:06.450 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:57:06.450 [main] DEBUG ReportServiceImpl - Reading photo from path: backend/uploads/photos/photo.jpg
2025-01-24 23:57:06.450 [main] TRACE ReportServiceImpl - Exiting getPhoto method in ReportServiceImpl
2025-01-24 23:57:06.455 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 23:57:06.456 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 23:57:06.457 [main] ERROR ReportServiceImpl - PDF data is empty or corrupted for username: testUser
2025-01-24 23:57:06.462 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:57:06.462 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:57:06.462 [main] DEBUG ReportServiceImpl - Deleting photo at path: backend/uploads/photos/photo.jpg
2025-01-24 23:57:06.463 [main] INFO  ReportServiceImpl - Successfully deleted photo for report id: 1
2025-01-24 23:57:06.463 [main] TRACE ReportServiceImpl - Exiting deletePhoto method in ReportServiceImpl
2025-01-24 23:57:06.468 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:57:06.468 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: unauthorizedUser
2025-01-24 23:57:06.468 [main] ERROR ReportServiceImpl - Unauthorized deletion attempt by username: unauthorizedUser for report id: 1
2025-01-24 23:57:06.472 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 23:57:06.472 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 23:57:06.472 [main] ERROR ReportServiceImpl - Report not found with ID: 1
2025-01-24 23:57:06.478 [main] TRACE ReportServiceImpl - Entering getReportPdf method in ReportServiceImpl
2025-01-24 23:57:06.478 [main] DEBUG ReportServiceImpl - Generating PDF for report id: 1
2025-01-24 23:57:06.478 [main] ERROR ReportServiceImpl - Report with id: 1 not found
2025-01-24 23:57:06.486 [main] TRACE ReportServiceImpl - Entering getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 23:57:06.486 [main] DEBUG ReportServiceImpl - Fetching all reports with filters - Page: 0, Size: 10, SortBy: date, Direction: ASC
2025-01-24 23:57:06.488 [main] INFO  ReportServiceImpl - Total reports found: 1
2025-01-24 23:57:06.488 [main] TRACE ReportServiceImpl - Exiting getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 23:57:06.492 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 23:57:06.493 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 23:57:06.493 [main] INFO  ReportServiceImpl - Report added successfully: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 23:57:06.500 [main] TRACE ReportServiceImpl - Exiting addReport method in ReportServiceImpl
2025-01-24 23:57:06.505 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:57:06.505 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:57:06.505 [main] ERROR ReportServiceImpl - Report with id: 1 not found for delete photo
2025-01-24 23:57:06.513 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 23:57:06.513 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 23:57:06.514 [main] ERROR ReportServiceImpl - Cached prescription or TR ID number not found for username: testUser
2025-01-24 23:57:06.518 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 23:57:06.518 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 23:57:06.518 [main] ERROR ReportServiceImpl - Report with id: 1 not found for prescription
2025-01-24 23:57:06.523 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:57:06.523 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:57:06.524 [main] INFO  ReportServiceImpl - Report with id: 1 successfully restored by technician: tech1
2025-01-24 23:57:06.524 [main] TRACE ReportServiceImpl - Exiting restoreReport method in ReportServiceImpl
2025-01-24 23:57:06.530 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 23:57:06.530 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 23:57:06.531 [main] INFO  ReportServiceImpl - Report found: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 23:57:06.531 [main] TRACE ReportServiceImpl - Exiting getReportById method in ReportServiceImpl
2025-01-24 23:57:06.536 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:57:06.537 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:57:06.537 [main] ERROR ReportServiceImpl - Unauthorized photo upload attempt by user: tech1 on report id: 1
2025-01-24 23:57:06.543 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:57:06.543 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:57:06.543 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found to restore
2025-01-24 23:57:06.549 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 23:57:06.550 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 23:57:06.551 [main] INFO  ReportServiceImpl - Successfully generated and cached prescription for username: testUser
2025-01-24 23:57:06.551 [main] TRACE ReportServiceImpl - Exiting getPrescription method in ReportServiceImpl
2025-01-24 23:57:06.556 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:57:06.556 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 23:57:06.556 [main] INFO  ReportServiceImpl - Report with id: 1 successfully updated by technician: tech1
2025-01-24 23:57:06.557 [main] TRACE ReportServiceImpl - Exiting updateReport method in ReportServiceImpl
2025-01-24 23:57:06.560 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:57:06.561 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:57:06.561 [main] ERROR ReportServiceImpl - No photo found for report id: 1
2025-01-24 23:57:06.598 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:57:06.599 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:57:06.599 [main] ERROR ReportServiceImpl - Attempted to add a photo to report with id: 1 which already has a photo
2025-01-24 23:57:06.604 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:57:06.604 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 23:57:06.604 [main] ERROR ReportServiceImpl - Report with id 1 not found
2025-01-24 23:57:06.609 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:57:06.609 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 23:57:06.610 [main] INFO  ReportServiceImpl - Report with id: 1 successfully deleted by technician: tech1
2025-01-24 23:57:06.610 [main] TRACE ReportServiceImpl - Exiting deleteReport method in ReportServiceImpl
2025-01-24 23:57:06.615 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:57:06.615 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech2
2025-01-24 23:57:06.616 [main] ERROR ReportServiceImpl - Unauthorized delete attempt by user: tech2 on report id: 1
2025-01-24 23:57:06.619 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:57:06.620 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 23:57:06.620 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found for deletion.
2025-01-24 23:57:06.624 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:57:06.624 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:57:06.624 [main] ERROR ReportServiceImpl - Report with id 1 not found for add photo
2025-01-24 23:57:06.629 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:57:06.629 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:57:06.630 [main] ERROR ReportServiceImpl - Unsupported file format: txt for report id: 1
2025-01-24 23:57:06.634 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:57:06.635 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:57:06.635 [main] ERROR ReportServiceImpl - Report with id: 1 not found for get photo
2025-01-24 23:57:06.638 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:57:06.639 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:57:06.639 [main] ERROR ReportServiceImpl - No photo to delete for report id: 1
2025-01-24 23:59:53.884 [main] TRACE ReportController - Entering getPrescription method in ReportController class
2025-01-24 23:59:53.893 [main] INFO  ReportController - Fetching prescription for report ID: 1 by user: technician1
2025-01-24 23:59:53.925 [main] TRACE ReportController - Exiting getPrescription method in ReportController class
2025-01-24 23:59:53.976 [main] TRACE ReportController - Entering addReport method in ReportController class
2025-01-24 23:59:53.976 [main] INFO  ReportController - Adding the report by the user: technician1
2025-01-24 23:59:53.977 [main] TRACE ReportController - Exiting addReport method in ReportController class
2025-01-24 23:59:53.993 [main] TRACE ReportController - Entering restoreReport method in ReportController class
2025-01-24 23:59:53.994 [main] INFO  ReportController - Restoring the report with ID: 1 by the user: technician1
2025-01-24 23:59:53.994 [main] TRACE ReportController - Exiting restoreReport method in ReportController class
2025-01-24 23:59:53.999 [main] TRACE ReportController - Entering getReportById method in ReportController class
2025-01-24 23:59:53.999 [main] INFO  ReportController - Retrieving report with ID: 1
2025-01-24 23:59:53.999 [main] TRACE ReportController - Exiting getReportById method in ReportController class
2025-01-24 23:59:54.006 [main] TRACE ReportController - Entering getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 23:59:54.006 [main] INFO  ReportController - Retrieving reports filtered and sorted: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null, deleted=null
2025-01-24 23:59:54.006 [main] TRACE ReportController - Exiting getAllReportsFilteredAndSorted method in ReportController class
2025-01-24 23:59:54.011 [main] TRACE ReportController - Entering updateReport method in ReportController class
2025-01-24 23:59:54.011 [main] INFO  ReportController - Updating the report by the user: technician1
2025-01-24 23:59:54.012 [main] TRACE ReportController - Exiting updateReport method in ReportController class
2025-01-24 23:59:54.016 [main] TRACE ReportController - Entering sendPrescription method in ReportController class
2025-01-24 23:59:54.016 [main] INFO  ReportController - Sending prescription for user: technician1
2025-01-24 23:59:54.017 [main] TRACE ReportController - Exiting sendPrescription method in ReportController class
2025-01-24 23:59:54.023 [main] TRACE ReportController - Entering getAllReportsByTechnician method in ReportController class
2025-01-24 23:59:54.024 [main] INFO  ReportController - Retrieving reports for technician: page=0, size=3, sortBy=id, direction=ASC, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, username=technician1, deleted=null
2025-01-24 23:59:54.024 [main] TRACE ReportController - Exiting getAllReportsByTechnician method in ReportController class
2025-01-24 23:59:54.030 [main] TRACE ReportController - Entering deletePhoto method in ReportController class
2025-01-24 23:59:54.030 [main] INFO  ReportController - Deleting photo for report ID: 1 by user: technician1
2025-01-24 23:59:54.031 [main] TRACE ReportController - Exiting deletePhoto method in ReportController class
2025-01-24 23:59:54.036 [main] TRACE ReportController - Entering deleteReport method in ReportController class
2025-01-24 23:59:54.036 [main] INFO  ReportController - Deleting the report with ID: 1 by the user: technician1
2025-01-24 23:59:54.037 [main] TRACE ReportController - Exiting deleteReport method in ReportController class
2025-01-24 23:59:54.146 [main] TRACE ReportController - Entering getReportPdf method in ReportController class
2025-01-24 23:59:54.147 [main] INFO  ReportController - Fetching PDF report for report ID: 1
2025-01-24 23:59:54.147 [main] TRACE ReportController - Exiting getReportPdf method in ReportController class
2025-01-24 23:59:54.150 [main] TRACE ReportController - Entering checkTrIdNumber method in ReportController class
2025-01-24 23:59:54.151 [main] INFO  ReportController - Checking TR ID number: 12345678901 for user: technician1
2025-01-24 23:59:54.151 [main] TRACE ReportController - Exiting checkTrIdNumber method in ReportController class
2025-01-24 23:59:54.154 [main] TRACE ReportController - Entering getPhoto method in ReportController class
2025-01-24 23:59:54.154 [main] INFO  ReportController - Fetching photo for report ID: 1 by user: technician1
2025-01-24 23:59:54.155 [main] TRACE ReportController - Exiting getPhoto method in ReportController class
2025-01-24 23:59:54.158 [main] TRACE ReportController - Entering addPhoto method in ReportController class
2025-01-24 23:59:54.158 [main] INFO  ReportController - Uploading photo for report ID: 1 by user: technician1
2025-01-24 23:59:54.160 [main] TRACE ReportController - Exiting addPhoto method in ReportController class
2025-01-24 23:59:54.748 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:59:54.748 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: differentUser
2025-01-24 23:59:54.749 [main] ERROR ReportServiceImpl - Unauthorized access attempt by username: differentUser for report id: 1
2025-01-24 23:59:54.768 [main] TRACE ReportServiceImpl - Entering getReportsByTechnician method in ReportServiceImpl
2025-01-24 23:59:54.769 [main] DEBUG ReportServiceImpl - Fetching reports for technician: technician1 with filters - Page: 0, Size: 10, SortBy: date, Direction: DESC
2025-01-24 23:59:54.773 [main] INFO  ReportServiceImpl - Total reports found for technician technician1: 1
2025-01-24 23:59:54.773 [main] TRACE ReportServiceImpl - Exiting getReportsByTechnician method in ReportServiceImpl
2025-01-24 23:59:54.779 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 23:59:54.780 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 23:59:54.780 [main] ERROR ReportServiceImpl - TR ID number not found in Redis for user: techUser
2025-01-24 23:59:54.785 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:59:54.786 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech2
2025-01-24 23:59:54.786 [main] ERROR ReportServiceImpl - Unauthorized update attempt by user: tech2 on report id: 1
2025-01-24 23:59:54.790 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:59:54.790 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:59:54.791 [main] ERROR ReportServiceImpl - Unauthorized restore attempt by user: tech1 on report id: 1
2025-01-24 23:59:54.878 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:59:54.878 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:59:54.878 [main] DEBUG ReportServiceImpl - Reading photo from path: backend/uploads/photos/photo.jpg
2025-01-24 23:59:54.879 [main] TRACE ReportServiceImpl - Exiting getPhoto method in ReportServiceImpl
2025-01-24 23:59:54.884 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 23:59:54.884 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 23:59:54.885 [main] ERROR ReportServiceImpl - PDF data is empty or corrupted for username: testUser
2025-01-24 23:59:54.889 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:59:54.889 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:59:54.890 [main] DEBUG ReportServiceImpl - Deleting photo at path: backend/uploads/photos/photo.jpg
2025-01-24 23:59:54.890 [main] INFO  ReportServiceImpl - Successfully deleted photo for report id: 1
2025-01-24 23:59:54.890 [main] TRACE ReportServiceImpl - Exiting deletePhoto method in ReportServiceImpl
2025-01-24 23:59:54.896 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:59:54.896 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: unauthorizedUser
2025-01-24 23:59:54.896 [main] ERROR ReportServiceImpl - Unauthorized deletion attempt by username: unauthorizedUser for report id: 1
2025-01-24 23:59:54.900 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 23:59:54.900 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 23:59:54.901 [main] ERROR ReportServiceImpl - Report not found with ID: 1
2025-01-24 23:59:54.905 [main] TRACE ReportServiceImpl - Entering getReportPdf method in ReportServiceImpl
2025-01-24 23:59:54.905 [main] DEBUG ReportServiceImpl - Generating PDF for report id: 1
2025-01-24 23:59:54.906 [main] ERROR ReportServiceImpl - Report with id: 1 not found
2025-01-24 23:59:54.910 [main] TRACE ReportServiceImpl - Entering getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 23:59:54.910 [main] DEBUG ReportServiceImpl - Fetching all reports with filters - Page: 0, Size: 10, SortBy: date, Direction: ASC
2025-01-24 23:59:54.911 [main] INFO  ReportServiceImpl - Total reports found: 1
2025-01-24 23:59:54.911 [main] TRACE ReportServiceImpl - Exiting getAllReportsFilteredAndSorted method in ReportServiceImpl
2025-01-24 23:59:54.916 [main] TRACE ReportServiceImpl - Entering addReport method in ReportServiceImpl
2025-01-24 23:59:54.916 [main] DEBUG ReportServiceImpl - Adding report for user: techUser
2025-01-24 23:59:54.917 [main] INFO  ReportServiceImpl - Report added successfully: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 23:59:54.924 [main] TRACE ReportServiceImpl - Exiting addReport method in ReportServiceImpl
2025-01-24 23:59:54.928 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:59:54.928 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:59:54.928 [main] ERROR ReportServiceImpl - Report with id: 1 not found for delete photo
2025-01-24 23:59:54.932 [main] TRACE ReportServiceImpl - Entering sendPrescription method in ReportServiceImpl
2025-01-24 23:59:54.932 [main] DEBUG ReportServiceImpl - Sending prescription email for username: testUser
2025-01-24 23:59:54.932 [main] ERROR ReportServiceImpl - Cached prescription or TR ID number not found for username: testUser
2025-01-24 23:59:54.937 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 23:59:54.937 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 23:59:54.938 [main] ERROR ReportServiceImpl - Report with id: 1 not found for prescription
2025-01-24 23:59:54.942 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:59:54.943 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:59:54.943 [main] INFO  ReportServiceImpl - Report with id: 1 successfully restored by technician: tech1
2025-01-24 23:59:54.943 [main] TRACE ReportServiceImpl - Exiting restoreReport method in ReportServiceImpl
2025-01-24 23:59:54.948 [main] TRACE ReportServiceImpl - Entering getReportById method in ReportServiceImpl
2025-01-24 23:59:54.948 [main] DEBUG ReportServiceImpl - Fetching report with ID: 1
2025-01-24 23:59:54.948 [main] INFO  ReportServiceImpl - Report found: GetReportResponse(id=null, fileNumber=null, patientTrIdNumber=null, diagnosisTitle=null, diagnosisDetails=null, date=null, photoPath=null, technicianUsername=null)
2025-01-24 23:59:54.948 [main] TRACE ReportServiceImpl - Exiting getReportById method in ReportServiceImpl
2025-01-24 23:59:54.952 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:59:54.953 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:59:54.953 [main] ERROR ReportServiceImpl - Unauthorized photo upload attempt by user: tech1 on report id: 1
2025-01-24 23:59:54.957 [main] TRACE ReportServiceImpl - Entering restoreReport method in ReportServiceImpl
2025-01-24 23:59:54.957 [main] DEBUG ReportServiceImpl - Attempting to restore report with id: 1 by technician: tech1
2025-01-24 23:59:54.958 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found to restore
2025-01-24 23:59:54.962 [main] TRACE ReportServiceImpl - Entering getPrescription method in ReportServiceImpl
2025-01-24 23:59:54.963 [main] DEBUG ReportServiceImpl - Generating prescription for report id: 1
2025-01-24 23:59:54.964 [main] INFO  ReportServiceImpl - Successfully generated and cached prescription for username: testUser
2025-01-24 23:59:54.964 [main] TRACE ReportServiceImpl - Exiting getPrescription method in ReportServiceImpl
2025-01-24 23:59:54.969 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:59:54.969 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 23:59:54.970 [main] INFO  ReportServiceImpl - Report with id: 1 successfully updated by technician: tech1
2025-01-24 23:59:54.970 [main] TRACE ReportServiceImpl - Exiting updateReport method in ReportServiceImpl
2025-01-24 23:59:54.975 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:59:54.976 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:59:54.976 [main] ERROR ReportServiceImpl - No photo found for report id: 1
2025-01-24 23:59:55.013 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:59:55.013 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:59:55.014 [main] ERROR ReportServiceImpl - Attempted to add a photo to report with id: 1 which already has a photo
2025-01-24 23:59:55.019 [main] TRACE ReportServiceImpl - Entering updateReport method in ReportServiceImpl
2025-01-24 23:59:55.019 [main] DEBUG ReportServiceImpl - Updating report with id: 1 by technician: tech1
2025-01-24 23:59:55.019 [main] ERROR ReportServiceImpl - Report with id 1 not found
2025-01-24 23:59:55.023 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:59:55.024 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 23:59:55.024 [main] INFO  ReportServiceImpl - Report with id: 1 successfully deleted by technician: tech1
2025-01-24 23:59:55.025 [main] TRACE ReportServiceImpl - Exiting deleteReport method in ReportServiceImpl
2025-01-24 23:59:55.030 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:59:55.030 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech2
2025-01-24 23:59:55.030 [main] ERROR ReportServiceImpl - Unauthorized delete attempt by user: tech2 on report id: 1
2025-01-24 23:59:55.035 [main] TRACE ReportServiceImpl - Entering deleteReport method in ReportServiceImpl
2025-01-24 23:59:55.036 [main] DEBUG ReportServiceImpl - Attempting to delete report with id: 1 by technician: tech1
2025-01-24 23:59:55.036 [main] ERROR ReportServiceImpl - The report with ID 1 could not be found for deletion.
2025-01-24 23:59:55.040 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:59:55.041 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:59:55.041 [main] ERROR ReportServiceImpl - Report with id 1 not found for add photo
2025-01-24 23:59:55.045 [main] TRACE ReportServiceImpl - Entering addPhoto method in ReportServiceImpl
2025-01-24 23:59:55.046 [main] DEBUG ReportServiceImpl - Adding photo to report with id: 1 by technician: tech1
2025-01-24 23:59:55.046 [main] ERROR ReportServiceImpl - Unsupported file format: txt for report id: 1
2025-01-24 23:59:55.052 [main] TRACE ReportServiceImpl - Entering getPhoto method in ReportServiceImpl
2025-01-24 23:59:55.052 [main] DEBUG ReportServiceImpl - Fetching photo for report with id: 1 by technician: technicianUser
2025-01-24 23:59:55.052 [main] ERROR ReportServiceImpl - Report with id: 1 not found for get photo
2025-01-24 23:59:55.058 [main] TRACE ReportServiceImpl - Entering deletePhoto method in ReportServiceImpl
2025-01-24 23:59:55.058 [main] DEBUG ReportServiceImpl - Attempting to delete photo for report id: 1 by technician: technicianUser
2025-01-24 23:59:55.058 [main] ERROR ReportServiceImpl - No photo to delete for report id: 1
